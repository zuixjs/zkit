/* zUIx v1.0.6 21.03.17 22:57:46 */

/*
 @license
 Copyright 2015-2019 G-Labs. All Rights Reserved.
         https://zuixjs.github.io/zuix

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
'use strict';(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).zuix=m()})(function(){return function(){function m(q,w,c){function g(b,a){if(!w[b]){if(!q[b]){var h="function"==typeof require&&require;if(!a&&h)return h(b,!0);if(f)return f(b,!0);a=Error("Cannot find module '"+b+"'");throw a.code="MODULE_NOT_FOUND",
a;}a=w[b]={exports:{}};q[b][0].call(a.exports,function(a){return g(q[b][1][a]||a)},a,a.exports,m,q,w,c)}return w[b].exports}for(var f="function"==typeof require&&require,b=0;b<c.length;b++)g(c[b]);return g}return m}()({1:[function(m,q,w){function c(a){r=a}function g(){null!==v&&(cancelAnimationFrame(v),v=null);a++;if(a<h.length&&!r.willBreak())return b(),!0;(a>=h.length||r.willBreak())&&f();return!1}function f(b){a=-1;h.length=0;h=[];r.status(null!=b?b:"done")}function b(){const b=h[a];if(null==b)return!1;
const e=function(){null!==v&&(cancelAnimationFrame(v),v=null);r.doWork(b.item,function(){v=requestAnimationFrame(g)})||g()};if(b.cancelable)if(r.willBreak())f("stopped");else if(null==v)v=requestAnimationFrame(e);else return!1;else e();return!0}c.prototype.isReady=function(){return 0===h.length||-1===a};c.prototype.getJobs=function(){return h};c.prototype.setJobs=function(b){0<h.length?(a=-1,h.length=0):(h=b.slice(),r.status("start",h),g())};c.prototype.append=function(a){this.isReady()?this.setJobs(a):
Array.prototype.push.apply(h,a)};let h=[],a=-1,r=null,v=null;q.exports=function(a){return new c(a)}},{}],2:[function(m,q,w){function c(a){f=window?window.console:{};b=window?window:{};this._timers={};this.args=function(a,b,c){a="%c "+b+" %c"+(new Date).toISOString()+" %c"+a;b=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var e=0;e<c.length;e++)if("string"==typeof c[e]&&0===
c[e].indexOf("timer:")){const k=c[e].split(":");if(3===k.length){let e;switch(k[2]){case "start":this._timers[k[1]]=(new Date).getTime();a+=" %cSTART "+k[1];b.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":e=(new Date).getTime()-this._timers[k[1]],a+=" %cSTOP "+k[1]+" "+e+" ms",200<e?b.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<e?b.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):b.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}}a+=
" \n%c ";b.push("background-color:transparent;color:inherit;");for(e=b.length-1;0<=e;e--)Array.prototype.unshift.call(c,b[e]);Array.prototype.unshift.call(c,a);Array.prototype.push.call(c,"\n\n")};this.log=function(c,g){"function"===typeof h&&h.call(a,c,g);b.zuixNoConsoleOutput||(this.args(a,c,g),f.log.apply(f,g))}}const g="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" ");let f=null,b=null,
h=null;c.prototype.monitor=function(a){h=a};c.prototype.console=function(a){if(a)window.console=f;else for(window.console={},a=0;a<g.length;a++)window.console[g[a]]||(window.console[g[a]]=function(){})};c.prototype.info=function(){this.log("INFO",arguments);return this};c.prototype.i=c.prototype.l=c.prototype.log=c.prototype.info;c.prototype.warn=function(){this.log("WARN",arguments);return this};c.prototype.w=c.prototype.warn;c.prototype.error=function(){this.log("ERROR",arguments);return this};
c.prototype.e=c.prototype.error;c.prototype.debug=function(){this.log("DEBUG",arguments);return this};c.prototype.d=c.prototype.debug;c.prototype.trace=function(){this.log("TRACE",arguments);return this};c.prototype.t=c.prototype.trace;q.exports=function(a){return new c(a)}},{}],3:[function(m,q,w){function c(c){const b=this;b._worker=null;b._taskList=[];b._requests=[];null==c&&(c=function(){});b.taskQueue=function(f,a,r){b._taskList.push({tid:f,fn:a,status:0,priority:r,step:function(a){g.t(a,"load:step");
c(b,"load:step",{task:a})},end:function(){this.status=2;g.t(this.tid,"load:next","timer:task:stop");c(b,"load:next",{task:this.tid});b._taskList.splice(this.index,1);b.taskCheck();null!=this._callback&&this._callback.call(this)},callback:function(a){this._callback=a}});g.t(f,"task added",r,"priority");b._taskList.sort(function(a,b){return a.priority>b.priority?1:b.priority>a.priority?-1:0});b.taskCheck()};b.taskCheck=function(){for(let f=0;f<b._taskList.length;f++){if(0===b._taskList[f].status){b._taskList[f].status=
1;g.t(b._taskList[f].tid,"load:begin","timer:task:start");c(b,"load:begin",{task:b._taskList[f].tid});b._taskList[f].index=f;b._taskList[f].fn.call(b._taskList[f]);return}if(1===b._taskList[f].status||2===b._taskList[f].status)return}g.t("load:end");c(b,"load:end")}}const g=m("./Logger")("TaskQueue.js");c.prototype.callback=function(c){};c.prototype.queue=function(c,b,g){return this.taskQueue(c,b,g)};q.exports=c},{"./Logger":2}],4:[function(m,q,w){q.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},
isNoU:function(c){return"undefined"===typeof c||null===c},isFunction:function(c){return"function"===typeof c},objectEquals:function(c,g){if(null===c||void 0===c||null===g||void 0===g)return c===g;if(c.constructor!==g.constructor)return!1;if(c instanceof Function||c instanceof RegExp)return c===g;if(c===g||c.valueOf()===g.valueOf())return!0;if(Array.isArray(c)&&c.length!==g.length||c instanceof Date||!(c instanceof Object)||!(g instanceof Object))return!1;const f=Object.keys(c);return Object.keys(g).every(function(b){return-1!==
f.indexOf(b)})&&f.every(function(b){return util.objectEquals(c[b],g[b])})},propertyFromPath:function(c,g){if("string"===typeof g){g=g.match(/\[(".*?"|'.*?'|(.*?))\]|".*?"|'.*?'|[0-9a-zA-Z_$]+/g);for(let f=0;f<g.length;f++){let b=g[f];b.startsWith("[")&&b.endsWith("]")&&(b=b.substring(1,b.length-1).trim());b.startsWith('"')&&b.endsWith('"')?b=b.substring(1,b.length-1):b.startsWith("'")&&b.endsWith("'")&&(b=b.substring(1,b.length-1));if("undefined"!==typeof c[b])c=c[b];else return}return c}},cloneObject:function f(g){if(null===
g||"object"!==typeof g)return g;let b=g;try{b=g.constructor();for(let h in g)g.hasOwnProperty(h)&&(b[h]=f(g[h]))}catch(h){}return b},hasPassiveEvents:function(){let g=!1;try{const f=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassive",null,f);window.removeEventListener("testPassive",null,f)}catch(f){}return g},dom:{queryAttribute:function(g,f,b){const h=g.split(",");let a="";h.forEach(function(g,v){a=null!=f?a+("["+g+'="'+f+'"]'):a+("["+g+"]");b&&(a+=b.get(v));
v<h.length-1&&(a+=",")});return a},getAttribute:function(g,f){let b;if("string"===typeof f&&-1!==f.indexOf(",")){f=f.split(",");for(let h=0;h<f.length;h++){const a=g.getAttribute(f[h]);if(null!=a){b=a;break}}}else b=g.getAttribute(f);return b},setAttribute:function(g,f,b){if("string"===typeof f&&-1!==f.indexOf(",")){const h=this;f.split(",").forEach(function(a){h.setAttribute(g,a,b)})}else null===b?g.removeAttribute(f,b):g.setAttribute(f,b)},cssNot:function(g,f){const b=g.split(",");let h="";b.forEach(function(a,
g){h=a.startsWith(".")?h+(":not("+a+")"):null!=f?h+(":not(["+a+'="'+f+'"])'):h+(":not(["+a+"])");g<b.length-1&&(h+=",")});return function(a){return{get:function(b){const f=a.split(",");return b>=f.length||null==b?f[0]:f[b]},getAll:function(b){return a.split(",").join("")}}}(h)}}}},{}],5:[function(m,q,w){function c(d){b(this,d.type,d)}function g(d,a,b,n){let E=!1;l.each(k,function(){if(this.element===d&&this.path===a&&this.handler===b)return v.w("Handler already registered",d,a,b),E=!0,!1});E||(k.push({element:d,
path:a,handler:b,opgions:n}),d.addEventListener(a,c,!e||null!=n&&!1===n.passive?!1:{passive:!0}))}function f(d,a,b){let e=1,E=-1;l.each(k,function(c){this.element===d&&this.path===a&&this.handler===b&&(e--,E=c)});-1!==E&&k.splice(E,1);0===e&&d.removeEventListener(a,c)}function b(d,a,b){const e=l(d);l.each(k,function(){this.element===d&&this.path===a&&this.handler.call(e,b,e)})}function h(d){l.each(k,function(){this.element===d&&(v.t("Removing event handler",this.element,this.path,this.handler),f(this.element,
this.path,this.handler))})}function a(d){this._selection=[];"undefined"===typeof d&&(d=document.documentElement);if(d instanceof a)return d;if(d instanceof HTMLCollection||d instanceof NodeList){const a=this._selection=[];l.each(d,function(d,b){a.push(b)})}else if(Array.isArray(d))this._selection=d;else if(d===window||d instanceof HTMLElement||d instanceof Node)this._selection=[d];else if("string"===typeof d)this._selection=document.documentElement.querySelectorAll(d);else if(null!==d)throw v.e("ZxQuery cannot wrap object of this type.",
typeof d,d),Error("ZxQuery cannot wrap object of this type.");return this}function r(d){return new a(d)}const v=m("./Logger")("TaskQueue.js"),u=m("./Util.js");let e=u.hasPassiveEvents();const k=[];a.prototype.length=function(){return this._selection.length};a.prototype.parent=function(d){return u.isNoU(d)?new a(this._selection[0].parentNode):new a(l.getClosest(this._selection[0],d))};a.prototype.children=function(d){return u.isNoU(d)?new a(this._selection[0].children):new a(this._selection[0].querySelectorAll(d))};
a.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};a.prototype.get=function(d){u.isNoU(d)&&(d=0);return this._selection[d]};a.prototype.eq=function(d){const b=this._selection;let e=b[d];1<arguments.length&&(e=[],l.each(arguments,function(d,a){null!=b[a]&&e.push(b[a])}));return new a(e)};a.prototype.find=function(d){return new a(this._selection[0].querySelectorAll(d))};a.prototype.each=function(d){l.each(this._selection,d);return this};
a.prototype.attr=function(d,a){const b=this;if("object"===typeof d)l.each(d,function(d,a){b.each(function(b,e){u.dom.setAttribute(e,d,a)})});else{if("undefined"==typeof a)return u.dom.getAttribute(this._selection[0],d);this.each(function(b,e){u.dom.setAttribute(this.get(),d,a)})}return this};a.prototype.trigger=function(d,a){let b;window.CustomEvent?b=new CustomEvent(d,{detail:a}):(b=document.createEvent("CustomEvent"),b.initCustomEvent(d,!0,!0,a));this.each(function(d,a){a.dispatchEvent(b)});return this};
a.prototype.one=function(d,a){let b=!1;this.on(d,function(e,c){b||(b=!0,l(this).off(d,a),a.call(this,e,c,this))});return this};a.prototype.on=function(d,a){const b=d.match(/\S+/g)||[];let e;"function"!==typeof a&&(e=a,a=e.handler);this.each(function(d,c){l.each(b,function(d,b){g(c,b,a,e)})});return this};a.prototype.off=function(d,a){const b=d.match(/\S+/g)||[];this.each(function(d,e){l.each(b,function(d,b){f(e,b,a)})});return this};a.prototype.reset=function(){this.each(function(d,a){h(a)});return this};
a.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};a.prototype.position=function(){return null!=this._selection[0]?l.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};a.prototype.css=function(d,a){const b=this;if("object"===typeof d)l.each(d,function(d,a){b.each(function(b,e){e.style[d]=a})});else{if(u.isNoU(a))return this._selection[0].style[d];b.each(function(b,e){e.style[d]=a})}return this};a.prototype.addClass=function(d){const a=d.match(/\S+/g)||
[];l.each(this._selection,function(b,e){e.classList?l.each(a,function(d,a){e.classList.add(a)}):e.className+=" "+d});return this};a.prototype.hasClass=function(d){return l.hasClass(this._selection[0],d)};a.prototype.removeClass=function(d){const a=d.match(/\S+/g)||[];l.each(this._selection,function(b,e){e.classList?l.each(a,function(d,a){e.classList.remove(a)}):e.className=e.className.replace(new RegExp("(^|\\b)"+d.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};a.prototype.prev=function(){return new a(this._selection[0].previousElementSibling)};
a.prototype.next=function(){return new a(this._selection[0].nextElementSibling)};a.prototype.html=function(d){if(u.isNoU(d))return this._selection[0].innerHTML;this.each(function(a,b){b.innerHTML=d});return this};a.prototype.checked=function(d){if(u.isNoU(d)){const d=this._selection[0].checked;return null!=d&&"false"!=d&&(d||"checked"==d)}this.each(function(a,b){b.checked=d});return this};a.prototype.value=function(d){if(u.isNoU(d))return this._selection[0].value;this.each(function(a,b){b.value=d});
return this};a.prototype.append=function(d){"string"===typeof d?this._selection[0].innerHTML+=d:this._selection[0].appendChild(d);return this};a.prototype.insert=function(d,a){d=this.children().get(d);null!==d?this._selection[0].insertBefore(a,d):this._selection[0].appendChild(a);return this};a.prototype.prepend=function(d){"string"===typeof d?this._selection[0].innerHTML=d+this._selection[0].innerHTML:this._selection[0].insertBefore(d,this._selection[0].firstElementChild);return this};a.prototype.detach=
function(){const d=this._selection[0],a=d.parentNode;null!=a&&(d.__zuix_oldParent=a,d.__zuix_oldIndex=Array.prototype.indexOf.call(a.children,d),a.removeChild(d),v.t("Detached from parent",a,d));return this};a.prototype.attach=function(){const d=this._selection[0];null!=d.parentNode&&null!=d.__zuix_oldParent&&d.parentNode.removeChild(d);null==d.parentNode&&null!=d.__zuix_oldParent&&(l(d.__zuix_oldParent).insert(d.__zuix_oldIndex,d),d.__zuix_oldParent=null,delete d.__zuix_oldParent,delete d.__zuix_oldIndex);
return this};a.prototype.display=function(d){if(u.isNoU(d))return this._selection[0].style.display;l.each(this._selection,function(a,b){b.style.display=d});return this};a.prototype.visibility=function(d){if(u.isNoU(d))return this._selection[0].style.visibility;l.each(this._selection,function(a,b){b.style.visibility=d});return this};a.prototype.show=function(d){return this.display(null==d?"":d)};a.prototype.hide=function(){return this.display("none")};const l=r;r.find=function(d){return l().find(d)};
r.each=function(d,a){const b=null==d?0:Object.keys(d).length;if(0<b){let e=0;for(let c in d)if(d.hasOwnProperty(c)){let f=d[c];f instanceof Element&&(f=l(f));if(!1===a.call(f,c,d[c],f))break;e++;if(e>=b)break}}return this};r.ajax=r.http=function(d){let a;a=u.isNoU(d)||u.isNoU(d.url)?d:d.url;const b=new XMLHttpRequest;b.onload=function(){200===b.status?u.isFunction(d.success)&&d.success(b.responseText):u.isFunction(d.error)&&d.error(b,b.statusText,b.status);u.isFunction(d.then)&&d.then(b)};b.onerror=
function(a,b,e){u.isFunction(d.error)&&d.error(a,b,e)};"function"==typeof d.beforeSend&&d.beforeSend(b);try{b.open("GET",a),b.send()}catch(n){u.isFunction(d.error)&&d.error(b,b.statusText,b.status,n)}return this};r.hasClass=function(d,a){a=a.match(/\S+/g)||[];let b=!1;l.each(a,function(a,e){if(b=d.classList?d.classList.contains(e):(new RegExp("(^| )"+e+"( |$)","gi")).test(d.className))return!1});return b};r.classExists=function(d){d=d.match(/\S+/g)||[];let a=!1;l.each(d,function(d,b){d=document.styleSheets;
if(null!=d)for(let e=0;e<d.length;e++)try{const c=d[e].rules||d[e].cssRules;if(null!=c)for(let d=0;d<c.length;d++)if(c[d].selectorText===b){a=!0;break}}catch(p){if("SecurityError"!==p.name&&"InvalidAccessError"!==p.name)throw p;}});return a};r.wrapElement=function(d,a){d=document.createElement(d);"string"===typeof a?d.innerHTML=a:d.appendChild(a);return d};r.wrapCss=function(d,a,b){const e=/(([a-zA-Z0-9\240-\377=:-_\n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let c="",f;a=a.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,
"");do if((f=e.exec(a))&&1<f.length){var k=f[2];if(null!=k&&0<k.length){k=k.replace(/\n/g,"");const a=k.split(",");let e=!1;l.each(a,function(f,k){"."===k.trim()||":host"===k.trim()?c+="\n[z-component]"+d+" ":"@"===k.trim()[0]?(c+=k+" ",k.trim().toLowerCase().startsWith("@media")&&(e=!0)):b?k.split(/\s+/).forEach(function(a){a=a.trim();0<a.lastIndexOf(".")?a.split(".").forEach(function(a){""!==a&&(c+="."+a+d)}):""!==a&&(c+="\n"+a+d+" ")}):c+="\n[z-component]"+d+"\n"+k.trim()+" ";f<a.length-1&&(c=
c.trim()+", ")});e?(k=l.wrapCss(d,f[1].substring(f[2].length).replace(/^{([^\0]*?)}$/,"$1"),b),c+="{\n  "+k+"\n}"):c+=f[1].substring(f[2].length)+"\n"}else v.w("z$.wrapCss was unable to parse rule.",k,f)}while(f);""!==c&&(a=c);return a};r.appendCss=function(d,a,b){const e=document.head||document.getElementsByTagName("head")[0];let c=null;u.isNoU(a)?(a=document.getElementById(b),null!=a&&e.removeChild(a)):e.removeChild(a);"string"===typeof d?(c=document.createElement("style"),c.type="text/css",c.id=
b,c.styleSheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d))):d instanceof Element&&(c=d);u.isNoU(c)||e.appendChild(c);return c};r.replaceCssVars=function(d,a){const b=new RegExp(/\B\$var\[(.*[^\[\]])]/g);let e="",c=0,f=0,k;for(;k=b.exec(d);){let b=k[0];if(1<k.length){var l=k[1];let d=a;if(0<l.indexOf(".")){l=l.split(".");for(let a=0;a<l.length-1&&(d=d[l[a]],"undefined"!==typeof d);a++);"undefined"!==typeof d&&(b=d[l[l.length-1]],c++)}else"undefined"!==typeof d[l]&&(b=d[l],c++)}e+=
d.substr(f,k.index-f)+b;f=k.index+k[0].length}0<c&&(d=e+=d.substr(f));return d};r.replaceBraces=function(d,a){const b=new RegExp(/{?{.*?}?}/g);let e="",c=0,f=0;for(var k;k=b.exec(d);){if("string"===typeof k[0]&&(0===k[0].trim().length||0<=k[0].indexOf("\n"))){k=d.substr(f,k.index-f)+k[0];e+=k;f+=k.length;continue}let b=k[0];if("function"===typeof a){const d=a(k[0]);u.isNoU(d)||(b=d,c++)}e+=d.substr(f,k.index-f)+b;f=k.index+k[0].length}return 0<c?e+=d.substr(f):null};r.getClosest=function(d,a){for(d=
d.parentNode;d&&d!==document;d=d.parentNode)if(d.matches(a))return d;return null};r.getPosition=function(d,a){var b;{var e=b=0,c=d.getBoundingClientRect();let a=d;for(;a;){if("body"===a.tagName.toLowerCase()){const d=a.scrollTop||document.documentElement.scrollTop;b+=a.offsetLeft-(a.scrollLeft||document.documentElement.scrollLeft)+a.clientLeft;e+=a.offsetTop-d+a.clientTop}else b+=a.offsetLeft-a.scrollLeft+a.clientLeft,e+=a.offsetTop-a.scrollTop+a.clientTop;a=a.offsetParent}b={x:b,y:e,rect:c}}b.visible=
!1;c=d.offsetParent;if(null!=c){if(c!==document.body){for(e=c.offsetParent;null!=e&&null!==e.offsetParent&&e.offsetHeight===e.scrollHeight;)e=e.offsetParent;null!=e&&(c=e)}e=c.getBoundingClientRect();c===document.body&&(e={x:e.x,y:e.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||
document.documentElement.offsetHeight});null==a&&(a=0);c=d.getBoundingClientRect();a=!(c.left-1>e.right-a||c.right+1<e.left+a||c.top-1>e.bottom-a||c.bottom+1<e.top+a);b.visible=a;b.frame={dx:(c.left+c.width/2-e.left)/e.width,dy:(c.top+c.height/2-e.top)/e.height};d=l(d);!a&&d.hasClass("--ui--visible")?(d.removeClass("--ui--visible"),b.event="exit"):a?a&&(d.hasClass("--ui--visible")?b.event="scroll":(b.event="enter",d.addClass("--ui--visible"))):b.event="off-scroll"}return b};r.ZxQuery=a;Element.prototype.matches||
(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);let d=a.length;for(;0<=--d&&a.item(d)!==this;);return-1<d});(function(){function a(a,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};const b=document.createEvent("CustomEvent");b.initCustomEvent(a,d.bubbles,d.cancelable,
d.detail);return b}if("function"===typeof window.CustomEvent)return!1;a.prototype=window.Event.prototype;window.CustomEvent=a})();String.prototype.hashCode=function(){let a=0;if(0===this.length)return a;for(let d=0;d<this.length;d++){let b=this.charCodeAt(d);a=(a<<5)-a+b;a|=0}return a};String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return this.substr(!b||0>b?0:+b,a.length)===a});q.exports=l},{"./Logger":2,"./Util.js":4}],6:[function(m,q,w){m=m("./zuix/Zuix.js");"object"===
typeof q&&q.exports?q.exports=m.call(this):this.zuix=m.call(this)},{"./zuix/Zuix.js":16}],7:[function(m,q,w){function c(){this.observableList=[]}function g(a){let b="";for(;a&&a.__path__;){const c=a;a=a.__parents__[0];b=null!=a&&null!=a.__path__?"['"+c.__path__+"']."+b:c.__path__+(b.startsWith("[")?"":".")+b}return b}function f(a){const b=[];a.__parents__.forEach(function(a){b.push(...f(a))});b.push(...a.__listeners__);return b}function b(a){f(a).forEach(function(b){a.unsubscribe(b)})}m("./ObservableListener");
const h=m("./ObservableObject");c.prototype.observable=function(a){let c;const m=this.observableList.filter(function(b){return a===b.proxy||a===b.target});1===m.length&&(c=m[0]);null==c&&(c=new h(this,a,{context:null,get:function(a,b){if("observableTarget"===b)return a;let e=a[b];if("undefined"!==typeof e){var c=[],d=this.context.observable(a);if("object"===typeof e){const a=this.context.observable(e);-1===a.__parents__.indexOf(d)&&(a.__parents__.push(d),a.__path__=b);c.push(...f(a));e=a.proxy}else c.push(...f(d));
var h=g(d)+b;c.forEach(function(d){d.get(a,b,e,h)});return e}},set:function(a,e,c){let k=JSON.parse(JSON.stringify(a));var d=a[e];"object"===typeof d&&b(this.context.observable(d));a[e]=c;d=this.context.observable(a);const h=g(d)+e;f(d).forEach(function(d){d.set(a,e,c,h,k)});return!0},deleteProperty:function(a,e){let c=a[e];"object"===typeof c&&b(this.context.observable(c));return delete a[e]}}));return c};q.exports=c},{"./ObservableListener":8,"./ObservableObject":9}],8:[function(m,q,w){function c(){}
c.prototype.get=function(c,f,b,h){};c.prototype.set=function(c,f,b,h,a){};q.export=c},{}],9:[function(m,q,w){function c(c,f,b){Object.assign(b,{context:c});Object.assign(this,Proxy.revocable(f,b));this.handler=b;this.handler.context.observableList=this.handler.context.observableList||[];this.handler.context.observableList.push(this);this.target=f;this.__parents__=[];this.__listeners__=[]}m("./ObservableListener");c.prototype.subscribe=function(c){const f=this;this.handler.context.observableList.forEach(function(b){if(b!==
f&&-1!==b.__listeners__.indexOf(c))throw Error("Listener already registered.");});this.__listeners__.push(c);return this};c.prototype.unsubscribe=function(c){c=this.__listeners__.indexOf(c);-1!==c&&this.__listeners__.splice(c,1);if(0===this.__listeners__.length){this.revoke();const c=this;this.handler.context.observableList=this.handler.context.observableList.filter(function(b){if(b===c)return!1;const f=b.__parents__.indexOf(c);return-1!==f&&(b.__parents__.splice(f,1),0===b.__parents__.length&&0===
b.__listeners__.length)?(b.unsubscribe(null),!1):!0})}return this};q.exports=c},{"./ObservableListener":8}],10:[function(m,q,w){q.exports=function(c){return null}},{}],11:[function(m,q,w){function c(e,c){c=c.observableTarget||c;switch(e.tagName.toLowerCase()){case "img":e.src=a.isNoU(c.src)?a.isNoU(c.innerHTML)?c:c.innerHTML:c.src;c.alt&&(e.alt=c.alt);break;case "a":e.href=a.isNoU(c.href)?a.isNoU(c.innerHTML)?c:c.innerHTML:c.getAttribute("href");c.title&&(e.title=c.title);a.isNoU(c.href)||a.isNoU(c.innerHTML)||
""===c.innerHTML.trim()||(e.innerHTML=c.innerHTML);break;case "input":e.value=a.isNoU(c.value)?a.isNoU(c.innerHTML)?c:c.innerHTML:c.value;break;default:if(e.innerHTML=a.isNoU(c.innerHTML)?c:c.innerHTML,null!=c.attributes)for(let f=0;f<c.attributes.length;f++){const d=c.attributes[f];d.specified&&d.name!==b.dataUiField&&("+"===d.value[0]&&e.hasAttribute(d.name)&&(d.value=e.getAttribute(d.name)+" "+d.value.substring(1)),a.dom.setAttribute(e,d.name,d.value))}}}function g(e,f,l){v=e;this._options=null;
this.contextId=null==f||null==f.contextId?null:f.contextId;this.componentId=null;this.trigger=function(a,b,c){"function"===typeof l&&l(a,b,c)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this._modelListener=Object.assign({context:null,get:function(a,b,c,e){},set:function(d,e,f,k,l){d instanceof Element&&(k=k.split(".")[0],f=d);const g=h(this.context.view());if(g.get()){let h=g.find(a.dom.queryAttribute(b.dataBindTo,
k));null==h.get()&&(h=g.find(a.dom.queryAttribute(b.dataUiField,k)));h.get()&&c(h.get(),f);this.context._c&&"function"===typeof this.context._c.update&&this.context._c.update(d,e,f,k,l)}}},{context:this});this._viewObserver=new r(this);this.options(f);return this}const f=m("../helpers/Logger")("ComponentContext.js"),b=m("./OptionAttributes"),h=m("../helpers/ZxQuery"),a=m("../helpers/Util"),r=m("./ViewObserver");let v=null;const u=[];g.prototype.dispose=function(){this._viewObserver.stop();a.isNoU(this._c)||
(a.isNoU(this._c.view())||(this._c.view().attr(b.dataUiComponent,null),this._c.view().reset(),a.isNoU(this._c._fieldCache)||h.each(this._c._fieldCache,function(a,b){b.reset()})),a.isFunction(this._c.destroy)&&this._c.destroy.call(this,this));this.model(null);this._c.view().detach();const c=this._container;null!=c&&null!=c.parentNode&&c.parentNode.removeChild(c)};g.prototype.container=function(a){if(null==a)return this._container;a instanceof h.ZxQuery&&(a=a.get());this._container=a;return this};g.prototype.view=
function(c){if("undefined"===typeof c)return this._view;if(null===c)throw Error("View cannot be set to null.");c instanceof h.ZxQuery&&(c=c.get());if(c===this._view)return this;this._viewObserver.stop();const e=this.getCssId();if(null!=this._view){var l="*"+a.dom.cssNot(b.dataUiLoad).getAll()+a.dom.cssNot(b.dataUiInclude).getAll();h(this._view).attr(e,null).find(l).each(function(a,b){this.attr(e,null)})}f.t(this.componentId,"view:attach","timer:view:start");"string"===typeof c?(c={content:c},this.trigger(this,
"html:parse",c),c=c.content,l=h.wrapElement("div",c),null!=l.firstElementChild&&(null!=a.dom.getAttribute(l.firstElementChild,b.dataUiView)?1===l.children.length&&(c=l.firstElementChild.innerHTML):c=l.innerHTML),null!=this._container?(this._view=this._container,this._view.innerHTML+=c):null!=this._view?this._view.innerHTML=c:this._view=l,h(this._view).find("script").each(function(a,c){"true"!==this.attr(b.zuixLoaded)&&(this.attr(b.zuixLoaded,"true"),eval.call(window,c.innerHTML))}),this.trigger(this,
"view:process",h(this._view))):null!=this._container?(this._view=h.wrapElement("div",c.outerHTML).firstElementChild,a.dom.setAttribute(this._view,b.dataUiView,null),this._container.appendChild(this._view),this._view=this._container):this._view=c;c=h(this._view);c.find(a.dom.queryAttribute(b.dataUiLoad)).each(function(a,c){this.attr(b.dataUiLoaded,"false")});!1!==this._options.css&&(c.attr(e,""),null!=this._container||null!=this._style?(l="*"+a.dom.cssNot(b.dataUiLoad).getAll()+a.dom.cssNot(b.dataUiInclude).getAll(),
c.find(l).each(function(a,b){this.attr(e,"")}),this._viewObserver.start(),c.attr("_ctrl_",null)):c.attr("_ctrl_",""));this.modelToView();f.t(this.componentId,"view:attach","timer:view:stop");return this};g.prototype.style=function(a){if("undefined"===typeof a)return this._style;f.t(this.componentId,"view:style","timer:view:start");if(null==a||a instanceof Element)this._css=a instanceof Element?a.innerText:a,this._style=h.appendCss(a,this._style,this.componentId);else if("string"===typeof a){this._css=
a;a={content:a};this.trigger(this,"css:parse",a);a=a.content;let b="";!0===this.options().resetCss&&(b="p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}img,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}");
const c="["+this.getCssId()+"]";a=h.wrapCss(c,b+"\n"+a,!0===this.options().encapsulation);this._style=h.appendCss(a,this._style,this.componentId)}f.t(this.componentId,"view:style","timer:view:stop");return this};g.prototype.model=function(b){if("undefined"===typeof b)return this._model;if(this._model===b)return this;null!==this._model&&"function"!==typeof this._model&&v.observable(this._model).unsubscribe(this._modelListener);this._model=b;null!=b&&("function"!==typeof b&&(this._model=v.observable(b).subscribe(this._modelListener).proxy),
this.modelToView(),null!=this._c&&a.isFunction(this._c.update)&&this._c.update.call(this._c,null,null,null,null,this._c));return this};g.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};g.prototype.options=function(a){if(null==a)return this._options;const b=this._options=this._options||{};Object.assign(b,a);this.componentId=b.componentId||this.componentId;null==u[this.componentId]&&(u[this.componentId]=u.length,u.length++);this.container(b.container);
this.view(b.view);"undefined"!==typeof b.css&&this.style(b.css);this.controller(b.controller);this.model(b.model);return this};g.prototype.on=function(a,b){this._c.on(a,b);return this};g.prototype.loadCss=function(b,c){const e=this;a.isNoU(b)&&(b={});a.isNoU(b.caching)||(c=b.caching);let d=e.componentId+".css";a.isNoU(b.path)||(d=b.path);c||(d+="?"+(new Date).getTime());h.ajax({url:v.getResourcePath(d),success:function(d){e.style(d);a.isFunction(b.success)&&b.success.call(e,d,e)},error:function(d){f.e(d,
e);a.isFunction(b.error)&&b.error.call(e,d,e)},then:function(){a.isFunction(b.then)&&b.then.call(e,e)}});return this};g.prototype.loadHtml=function(c,k){const e=this;let d=e.componentId;a.isNoU(c)&&(c={});a.isNoU(c.caching)||(k=c.caching);a.isNoU(c.path)||(d=c.path);var g=v.store("zuix.inlineViews");null==g&&(g=[],v.store("zuix.inlineViews",g));if(null!=g[d])e.view(g[d]),a.isFunction(c.success)&&c.success.call(e,g[d],e),a.isFunction(c.then)&&c.then.call(e,e);else{const l=h().find(a.dom.queryAttribute(b.dataUiView,
d,a.dom.cssNot(b.dataUiComponent)));0<l.length()?(k=l.get(0),g[d]=k.innerHTML,e.view()===k||null!=e.container()&&e.container().contains(k)?(l.attr(b.dataUiView,null),e._view=k,this.trigger(this,"view:process",h(e.view()))):e.view(k.innerHTML),a.isFunction(c.success)&&c.success.call(e,k.innerHTML,e),a.isFunction(c.then)&&c.then.call(e,e)):(g=a.isNoU(c.cext)?".html":c.cext,d==e.componentId&&(d+=g+(k?"":"?"+(new Date).getTime())),h.ajax({url:v.getResourcePath(d),success:function(b){e.view(b);a.isFunction(c.success)&&
c.success.call(e,b,e)},error:function(b){f.e(b,e);a.isFunction(c.error)&&c.error.call(e,b,e)},then:function(){a.isFunction(c.then)&&c.then.call(e,e)}}))}return this};g.prototype.viewToModel=function(){f.t(this.componentId,"view:model","timer:vm:start");const c={};h(this._view).find(a.dom.queryAttribute(b.dataUiField)).each(function(e,f){if(0<this.parent("pre,code").length())return!0;e=this.attr(b.dataUiField);f=!a.isNoU(f.innerHTML)&&a.isIE()?f.cloneNode(!0):f;if(0<e.indexOf(".")){e=e.split(".");
let a=c;for(let b=0;b<e.length-1;b++)"undefined"===typeof a[e[b]]&&(a[e[b]]={}),a=a[e[b]];a[e[e.length-1]]=f}else c[e]=f});this._model=v.observable(c).subscribe(this._modelListener).proxy;f.t(this.componentId,"view:model","timer:vm:stop");return this};g.prototype.modelToView=function(){f.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){const e=this;h(this._view).find(a.dom.queryAttribute(b.dataUiField)).each(function(f,g){if(0<this.parent("pre,code").length())return!0;
f=this.attr(b.dataBindTo);null==f&&(f=this.attr(b.dataUiField));const d=h(e._view);if("function"===typeof e._model)e._model.call(d,this,f,d);else{const b=a.propertyFromPath(e._model,f);"function"===typeof b?b.call(d,this,f,d):null!=b&&c(g,b)}})}f.t(this.componentId,"model:view","timer:mv:stop");return this};g.prototype.getCssId=function(){return"_css_"+u[this.componentId]};q.exports=g},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./OptionAttributes":14,"./ViewObserver":15}],
12:[function(m,q,w){function c(){}function g(a,b){null!=a&&(M=!a);null!=b&&(N=b);return!A&&!M}function f(a){null==a&&(a=document);F.indexOf(a)||F.push(a)}function b(a){for(let b=0;b<H.length;b++){const c=H[b];if(c.element===a)return c.waiting}return null}function h(a){null==a&&0<F.length&&(a=F.unshift());a instanceof D.ZxQuery&&(a=a.get());b(a);var c=p.dom.queryAttribute(n.dataUiLoad,null,p.dom.cssNot(n.dataUiLoaded))+","+p.dom.queryAttribute(n.dataUiInclude,null,p.dom.cssNot(n.dataUiLoaded));c=D(a).find(c);
c=Array.prototype.slice.call(c._selection);H.push({element:a,waiting:c});a=[];for(var d=0;d<c.length;d++){var f=c[d],z=+p.dom.getAttribute(f,n.dataUiPriority);isNaN(z)&&(z=0);let b=0;var G=f.parentNode;let e=!1;for(;null!=G&&G!==document;){b++;if(null!=p.dom.getAttribute(G,n.dataUiView)){e=!0;break}G=G.parentNode}e||(G=new K,G.element=f,G.priority=z+1E3*b,a.push(G))}c=0;for(d=0;d<a.length;d++){f=!1;for(z=0;z<y.length;z++)if(a[d].element===y[z].element){f=!0;break}f||(f=a[d].element,z=p.dom.getAttribute(f,
n.dataUiOptions),e(f,z),y.push(a[d]),c++)}t.t("componentize:count",y.length,c);(0===c||0===F.length&&0===y.length)&&C.trigger(this,"componentize:end")}function a(){y.sort(function(a,b){return a.priority-b.priority});let a=null,b=0<y.length?y.shift():null;for(;null!=b&&null!=b.element;){const c=O(b.element);g()&&c?(b.lazy=!0,b.visible=D.getPosition(b.element,N).visible):(b.lazy=!1,b.visible=!0);if(null!=b.element&&b.visible){a={item:b,cancelable:b.lazy};break}if(0<y.length)b=y.shift();else break}return a}
function r(b){h(b);b=a();null!=b&&L.append([b])}function v(a){var b=D(a);if(null!=b.attr(n.dataUiLoaded)||0<b.parent("pre,code").length())return!1;b.attr(n.dataUiLoaded,"true");let c=b.attr(n.dataUiOptions);p.isNoU(c)?c={}:("string"===typeof c&&(c=c.trim().startsWith("{")&&c.trim().endsWith("}")?eval("var o = "+c+"; o;"):p.propertyFromPath(window,c)),c=p.cloneObject(c)||{});var d=b.attr(n.dataUiContext);if(!p.isNoU(d)){var z=C.context(d);null!==z&&(c=z.options());c.contextId=d}p.isNoU(c.view)&&!b.isEmpty()?
(c.view=a,c.viewDeferred=!0):p.isNoU(c.view)&&p.isNoU(c.container)&&b.isEmpty()&&(c.container=a);d=b.attr(n.dataUiLoad);if(p.isNoU(d))if(d=b.attr(n.dataUiInclude),null!=d)d=u(d),b.attr(n.dataUiInclude,d),b.attr(n.dataUiComponent,""),p.isNoU(c.controller)&&(c.controller=function(){});else return!1;else d=u(d),b.attr(n.dataUiLoad,d);z=b.attr(n.dataBindModel);!p.isNoU(z)&&0<z.length&&(c.model=p.propertyFromPath(window,z));b=b.attr(n.dataUiPriority);p.isNoU(b)||(c.priority=+b);D(a).one("component:ready",
function(){f(a);r(a)});C.load(d,c);return!0}function u(a){if("@"===a[0]){let b=C.store("config"),c="https://zuixjs.github.io/zkit/lib/";null!=b&&null!=b[location.host]&&(b=b[location.host]);if(null!=b)switch(typeof b.libraryPath){case "object":D.each(b.libraryPath,function(b,d){return a.startsWith(b+"/")?(c=d,!1):!0});break;case "string":c=b.libraryPath}a=c+a.substring(a.indexOf("/")+1)}return a}function e(a,b){"string"===typeof b&&(b=b.trim().startsWith("{")&&b.trim().endsWith("}")?eval("var o = "+
b+"; o;"):p.propertyFromPath(window,b));null!=a&&null!=b&&(null!=b.lazyLoad&&p.dom.setAttribute(a,n.dataUiLazyload,b.lazyLoad.toString().toLowerCase()),null!=b.contextId&&p.dom.setAttribute(a,n.dataUiContext,b.contextId.toString().toLowerCase()),null!=b.componentId&&p.dom.setAttribute(a,n.dataUiLoad,b.componentId.toString().toLowerCase()))}function k(a){for(let b=0;b<x.length;b++){const c=x[b];if(c.element===a)return c}return null}function l(a){a={element:a};x.push(a);return a}function d(a){for(let b=
0;b<B.length;b++){const c=B[b];if(c.element===a)return c}return null}function E(a){a={element:a};B.push(a);return a}function O(a){if("false"===p.dom.getAttribute(a,n.dataUiLazyload))return!1;let b=k(a);if(null==b){var c=p.dom.queryAttribute(n.dataUiLazyload,"scroll")+","+p.dom.queryAttribute(n.dataUiLazyload,"true");c=D.getClosest(a.parentNode,c);if(null!=c)return b=l(a),a=d(c),null==a&&(a=E(c),"scroll"===p.dom.getAttribute(c,n.dataUiLazyload)&&function(a,b){let c=(new Date).getTime();D(b===document.body?
window:b).on("scroll",function(){const a=(new Date).getTime();100<a-c&&(c=a,r(b))})}(this,c)),!0;if("true"===p.dom.getAttribute(a,n.dataUiLazyload))return b=l(a),!0}else return!0;return!1}const n=m("./OptionAttributes");c.prototype.componentize=function(a,c){C.trigger(this,"componentize:begin");if(null!=c){const d=b(a);null==d?H.push({element:a,waiting:[c]}):d.push(c)}else f(a);r(a);return this};c.prototype.applyOptions=function(a,b){e(a,b);return this};c.prototype.resolvePath=function(a){return u(a)};
c.prototype.willLoadMore=function(){return 0<y.length||0<F.length};c.prototype.lazyLoad=function(a,b){return g(a,b)};c.prototype.dequeue=function(a){for(let b=0;b<y.length;b++)if(y[b].element===a){y.splice(b,1);break}};c.prototype.setHost=function(a){C=a;return this};q.exports=function(){return new c};const t=m("../helpers/Logger")("ComponentContext.js"),p=m("../helpers/Util"),D=m("../helpers/ZxQuery"),F=[],y=[],x=[],B=[],K=function(){return{element:null,priority:0,visible:!0,lazy:!1}},L=m("./../helpers/AsynChain")({doWork:function(a,
b){D(a.element).one("component:ready",function(){b()});return v(a.element)},willBreak:function(){return!1},status:function(a){switch(a){case "done":r()}}});let M=!1,N=1,C=null,A=!1;navigator&&navigator.userAgent&&(A=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));A&&t.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");const H=[]},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./../helpers/AsynChain":1,"./OptionAttributes":14}],
13:[function(m,q,w){function c(c){const b=this;this._view=null;this.context=c;this._fieldCache=[];this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(a,c){b._childNodes.push(c)})};this.restoreView=function(){0<this._childNodes.length&&(b.view().html(""),g.each(b._childNodes,function(a,c){b.view().append(c)}),this._childNodes.length=0)};this.on=function(a,b){this.addEvent(a,b);return this};this.mapEvent=function(a,b,c,e){null!=b&&(b.off(c,this.eventRouter),
a[c]=e,b.on(c,this.eventRouter))};this.eventRouter=function(a){const f=b.view();"function"===typeof c._behaviorMap[a.type]&&c._behaviorMap[a.type].call(f,a,a.detail,f);"function"===typeof c._eventMap[a.type]&&c._eventMap[a.type].call(f,a,a.detail,f)};const f=c.options();let a=null;if(null!=f.on)for(let c in f.on)f.on.hasOwnProperty(c)&&(a=f.on[c],b.addEvent(c,a));if(null!=f.behavior)for(let c in f.behavior)f.behavior.hasOwnProperty(c)&&(a=f.behavior[c],b.addBehavior(c,a));c.controller().call(this,
this);return this}const g=m("../helpers/ZxQuery");c.prototype.init=null;c.prototype.create=null;c.prototype.update=null;c.prototype.destroy=null;c.prototype.addEvent=function(c,b){this.mapEvent(this.context._eventMap,this.view(),c,b);return this};c.prototype.addBehavior=function(c,b){this.mapEvent(this.context._behaviorMap,this.view(),c,b);return this};c.prototype.field=function(c){return null};c.prototype.clearCache=function(){this._fieldCache.length=0};c.prototype.view=function(c){if(null!=this.context.view()||
this._view!==this.context.view())this.clearCache(),this._view=g(this.context.view());if(null!=c)return this._view.find(c);if(null!==this._view)return this._view;throw Error("Not attached to a view yet.");};c.prototype.model=function(c){if(null==c)return this.context.model();this.context.model(c);return this};c.prototype.options=function(){return this.context.options()};c.prototype.trigger=function(c,b,h){null==this.context._eventMap[c]&&!0!==h&&this.addEvent(c,null);!0===h?(h=this.context.container(),
null==h&&(h=this.context.view()),null!=h&&g(h).trigger(c,b),this.context.trigger(this.context,c,b)):this.view().trigger(c,b);return this};c.prototype.expose=function(c,b){if("object"===typeof c){const b=this;g.each(c,function(a,c){b.context[a]=c})}else this.context[c]=b;return this};c.prototype.loadCss=function(c){this.context.loadCss(c);return this};c.prototype.loadHtml=function(c){this.saveView();this.context.loadHtml(c);return this};c.prototype.log={};c.prototype.for=function(c){return this};q.exports=
c},{"../helpers/ZxQuery":5}],14:[function(m,q,w){m=Object.freeze({dataBindModel:"z-model,data-bind-model",dataBindTo:"z-bind,data-bind-to",dataUiComponent:"z-component",dataUiContext:"z-context,data-ui-context",dataUiField:"z-field,data-ui-field",dataUiInclude:"z-include,data-ui-include",dataUiLazyload:"z-lazy,data-ui-lazyload",dataUiLoad:"z-load,data-ui-load",dataUiLoaded:"z-loaded",dataUiOptions:"z-options,data-ui-options",dataUiPriority:"z-priority,data-ui-priority",dataUiView:"z-view,data-ui-view",
zuixLoaded:"zuix-loaded"});q.exports=m},{}],15:[function(m,q,w){function c(b){const c=this._context=b;this._mutationObserver=null;this._mutationCallback=function(a,b){const h=f.dom.queryAttribute(g.dataUiComponent);for(let b of a)"childList"===b.type&&b.addedNodes.forEach(function(a){if(a instanceof Element){let d=zuix.$(a).parent(h);if(null!=d.get())if(!1!==c.options().css&&null==d.attr("_ctrl_")){if(d.get()===c._container||d.get()===c._view){var b=!1;for(var e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("_css_")){b=
!0;break}b||f.dom.setAttribute(a,c.getCssId(),"")}}else{b=0;do b++,d=d.parent(h);while(10>b&&null!=d.get()&&null!=d.attr("_ctrl_"));if(d.get()){d=zuix.context(d);b=!1;for(e=0;e<a.attributes.length;e++)if(a.attributes[e].name.startsWith("_css_")){b=!0;break}b||(f.dom.setAttribute(a,d.getCssId(),""),zuix.$(a).find("*").each(function(){this.attr(d.getCssId(),"")}))}}}})}}const g=m("./OptionAttributes"),f=m("../helpers/Util");c.prototype.start=function(){this.stop();this._mutationObserver=new MutationObserver(this._mutationCallback);
this._mutationObserver.observe(this._context._view,{attributes:!1,childList:!0,subtree:!0})};c.prototype.stop=function(){null!=this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)};q.exports=c},{"../helpers/Util":4,"./OptionAttributes":14}],16:[function(m,q,w){function c(){x.setHost(this);this._store=[];this._fieldCache=[];return this}function g(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return M[b]=a});return a}function f(a,b,c){t.isNoU(c)&&(c=this);
null==c._fieldCache&&(c._fieldCache={});let d=null;"undefined"===typeof c._fieldCache[a]?(d=p(b).find(t.dom.queryAttribute(B.dataUiField,a)),null!=d&&0<d.length()&&(c._fieldCache[a]=d,1===d.length()&&t.isNoU(d.field)&&(d.field=function(a){return f(a,d,d)}))):d=c._fieldCache[a];return d}function b(a){let b=zuix.store("config");null!=b&&null!=b[location.host]&&(b=b[location.host]);a=x.resolvePath(a);!a.startsWith("//")&&0>a.indexOf("://")&&(a=(null!=b&&null!=b.resourcePath?b.resourcePath:"")+a);return a}
function h(a,b){let c=e(a.componentId);null!==c&&null==b.controller&&null==a.controller()&&(a.controller(c.controller),n.t(a.componentId+":js","component:cached:js"));if(t.isNoU(b.view)){if(null!==c&&(null!=c.view&&(a.view(c.view),n.t(a.componentId+":html","component:cached:html")),!1!==b.css&&(b.css=!1,c.css_applied||(c.css_applied=!0,a.style(c.css),n.t(a.componentId+":css","component:cached:css")))),t.isNoU(a.view()))return H("resource-loader").queue(a.componentId+":html",function(){A[a.componentId]=
this;a.loadHtml({cext:b.cext,caching:J,success:function(d){null==c&&(c=l(a));c.view=d;delete c.controller;!1!==b.css?(A[a.componentId].step(a.componentId+":css"),a.loadCss({caching:J,success:function(a){c.css=a},error:function(b){n.e(b,a)},then:function(){k(a,A[a.componentId])}})):k(a,A[a.componentId])},error:function(c){n.e(c,a);t.isFunction(b.error)&&a.error.call(a,c,a)}})},b.priority),a}else a.view(b.view);null==a.controller()?H("resource-loader").queue(a.componentId+":js",function(){A[a.componentId]=
this;k(a,A[a.componentId])},K.length):k(a);return a}function a(a){a=new F(zuix,a,v);K.push(a);return a}function r(a,b){let c=null;if(a instanceof p.ZxQuery)a=a.get();else if("string"===typeof a){const b=p.find(t.dom.queryAttribute(B.dataUiContext,a));0<b.length()&&(a=b.get())}p.each(K,function(b,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||t.objectEquals(d.contextId,a))return c=d,!1});if("function"===typeof b&&(a instanceof Element||a instanceof p.ZxQuery))if(null!=c&&c.isReady)b.call(c,
c);else p(a).one("component:ready",function(){c=zuix.context(this);b.call(c,c)});return c}function v(a,b,c){t.isFunction(L[b])&&L[b].call(a,c,a)}function u(a){null!=a&&(J=a);return J}function e(a){let b=null;p.each(I,function(c,d){if(t.objectEquals(d.componentId,a))return b=d,!1});return b}function k(a,c){if("undefined"===typeof a.options().controller&&null===a.controller())if(n.d(a.componentId,"controller:load"),t.isNoU(c)||c.step(a.componentId+":js"),t.isFunction(M[a.componentId]))a.controller(M[a.componentId]),
d(a,c);else{const e=function(c){const e=a.componentId+".js"+(J?"":"?"+(new Date).getTime());p.ajax({url:b(e),success:function(b){try{const c=b.indexOf("function"),d=b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,d-4));const e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+11));const f=b.indexOf("//<--controller");0<f&&(b=b.substring(0,f));b+='\n//# sourceURL="'+a.componentId+'.js"\n';a.controller(O(b))}catch(Q){n.e(Error(),Q,b,a),t.isFunction(a.error)&&a.error.call(a,Q,a)}},error:function(b){n.e(b,
Error(),a);t.isFunction(a.error)&&a.error.call(a,b,a)},then:function(){d(a,c)}})};t.isNoU(c)?H("resource-loader").queue(a.componentId+":js",function(){e(A[a.componentId]=this)},a.options().priority):e(c)}else d(a,c)}function l(a){var b=a.view().innerHTML;b=p.wrapElement("div",b);b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};I.push(b);n.t(a.componentId,"bundle:added");return b}function d(a,b){A[a.componentId]=null;if(t.isNoU(a.view()))n.e(a.componentId,"component:view:undefined");
else{let d=e(a.componentId);a.options().viewDeferred?n.w(a.componentId,"component:deferred:load"):null===d?d=l(a):null==d.controller&&(d.controller=a.controller());null!=b&&b.callback(function(){n.d(a.componentId,"controller:create:deferred");E(a._c)});var c=p(a.view());null==c.attr(B.dataUiContext)&&c.attr(B.dataUiContext,a.contextId);n.d(a.componentId,"component:initializing");if(t.isFunction(a.controller())){c=a._c=new y(a);c.log=m("../helpers/Logger")(a.contextId);"function"===typeof c.init&&
c.init();if(!t.isNoU(c.view()))if(null==c.view().attr(B.dataUiComponent)&&c.view().attr(B.dataUiComponent,""),t.isNoU(a.model())&&!t.isNoU(a.view())&&a.viewToModel(),a.options().viewDeferred){a.options().viewDeferred=!1;c.saveView();null===d&&(d={componentId:a.componentId,controller:a.controller()},I.push(d),n.t(a.componentId,"bundle:added"),n.d(a.componentId,"component:deferred:load"));let e=-1;!1!==a.options().css&&(null==d.css?(-1===e&&(e=0),e++,a.loadCss({caching:J,success:function(b){null==d.css&&
(d.css=b);n.d(a.componentId,"component:deferred:css",e)},then:function(){0===--e&&null!=b&&b.end()}})):a.style(d.css));!1!==a.options().html&&(null==d.view?(-1===e&&(e=0),e++,a.loadHtml({cext:a.options().cext,caching:J,success:function(b){null==d.view&&(d.view=b);n.d(a.componentId,"component:deferred:html",e)},error:function(b){n.e(b,a);t.isFunction(a.options().error)&&a.options().error.call(a,b,a)},then:function(){0===--e&&null!=b&&b.end()}})):a.view(d.view));-1===e&&null!=b&&b.end()}else null!=
b&&b.end();c.trigger("view:apply");null==b&&(n.d(a.componentId,"controller:create"),E(c))}else n.w(a.componentId,"component:controller:undefined")}}function E(a){n.t(a.context.componentId,"controller:init","timer:init:start");a.view().find(t.dom.queryAttribute(B.dataUiLoaded,"false",t.dom.cssNot(B.dataUiComponent))).each(function(a,b){this.attr(B.dataUiLoaded,null)});a.field=function(b){b=f(b,a.view(),a);b.on=function(b,c,d,e){if("string"===typeof c){const b=c;c=function(){a.trigger(b,d,e)}}return p.ZxQuery.prototype.on.call(this,
b,c)};return b};t.isFunction(a.create)&&a.create();a.trigger("view:create");t.isFunction(a.context.ready)&&a.context.ready.call(a.context,a.context);a.trigger("component:ready",a.view(),!0);a.context.isReady=!0;n.t(a.context.componentId,"controller:init","timer:init:stop");n.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=C[a.context.componentId]){const b=C[a.context.componentId];C[a.context.componentId]=null;let c;for(;null!=b&&null!=(c=b.shift());)h(c.c,c.o)}zuix.componentize(a.view())}
function O(a){let b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(S){n.e(this,S,a)}return b}const n=m("../helpers/Logger")("Zuix.js"),t=m("../helpers/Util"),p=m("../helpers/ZxQuery"),D=m("../helpers/TaskQueue");w=m("../observable/ObjectObserver");const F=m("./ComponentContext"),y=m("./ContextController"),x=m("./Componentizer")(),B=m("./OptionAttributes");m("./ComponentCache");const K=[],L=[],M={},N=[],C={},A=[],H=function(a){t.isNoU(N[a])&&(N[a]=new D(function(a,b,c){v(a,b,c)}));
return N[a]};let I=[],P=0,J=!0;const R=new w;c.prototype.field=function(a,b){return f.call(this,a,b)};c.prototype.load=function(b,c){{b=x.resolvePath(b);let d;t.isNoU(c)?(c={},d=new F(zuix,c,v)):(c.componentId=b,t.isNoU(c.contextId)?(!1===c&&(c={}),c.contextId="zuix-ctx-"+ ++P,d=a(c)):(d=r(c.contextId),null!==d?d.options(c):d=a(c)));d.componentId!=b&&(d.componentId=b);t.isFunction(c.ready)&&(d.ready=c.ready);t.isFunction(c.error)&&(d.error=c.error);null==A[b]?(A[b]=!0,c=h(d,c)):(null==C[b]&&(C[b]=
[]),C[b].push({c:d,o:c}),c=d)}return c};c.prototype.unload=function(a){if(a instanceof Element){const b=a;a=zuix.context(b);x.dequeue(b)}t.isNoU(a)||a.dispose();return this};c.prototype.controller=function(a){return g.call(this,a)};c.prototype.context=function(a,b){return r.call(this,a,b)};c.prototype.createComponent=function(b,c){null==c&&(c={});t.isNoU(c.contextId)&&(c.contextId="zuix-ctx-"+ ++P);if(null!=r(c.contextId))throw Error("Context arelady exists.");c.container=document.createElement("div");
c.componentId=b;x.applyOptions(c.container,c);return a(c)};c.prototype.trigger=function(a,b,c){v(a,b,c);return this};c.prototype.hook=function(a,b){t.isNoU(b)?delete L[a]:L[a]=b;return this};c.prototype.using=function(a,b,c){b=x.resolvePath(b);a=a.toLowerCase();const d=a+"-"+b.hashCode();if("component"===a)a=r(d),null==a?zuix.load(b,{contextId:d,view:"",priority:-10,ready:function(a){"function"===typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{const f="style"===
a;if(0===p.find(a+'[id="'+d+'"]').length()){const g=document.head||document.getElementsByTagName("head")[0],h=document.createElement(a);h.type=f?"text/css":"text/javascript";h.id=d;g.appendChild(h);const k=function(a){f?h.styleSheet?h.styleSheet.cssText=a:h.appendChild(document.createTextNode(a)):h.innerText?h.innerText=a:h.appendChild(document.createTextNode(a));c&&c(b,d)},l="_res/"+a+"/"+d;a=e(l);null!=a?k(f?a.css:a.controller):p.ajax({url:b,success:function(a){I.push({componentId:l,view:null,css:f?
a:null,controller:f?null:a,using:b});k(a)},error:function(){g.removeChild(h);c&&c(b)}})}else c&&c(b,d)}};c.prototype.lazyLoad=function(a,b){if(null!=a)x.lazyLoad(a,b);else return x.lazyLoad();return this};c.prototype.httpCaching=function(a){if(null!=a)u(a);else return u();return this};c.prototype.componentize=function(a){x.componentize(a);return this};c.prototype.store=function(a,b){null!=b&&(this._store[a]=b);return this._store[a]};c.prototype.getResourcePath=function(a){return b(a)};c.prototype.observable=
function(a){return R.observable(a)};c.prototype.bundle=function(a,b){if(t.isNoU(a))return I;if(a&&"boolean"===typeof a){n.t("bundle:start");const c=x.lazyLoad();x.lazyLoad(!1);x.componentize();"function"===typeof b&&(a=function(a){setTimeout(function(){x.willLoadMore()?(n.t("bundle:wait"),a(a)):(n.t("bundle:end"),x.lazyLoad(c),b())},1E3)},a(a))}else{for(let b=0;b<a.length;b++)a[b].css_applied&&delete a[b].css_applied,"string"===typeof a[b].controller&&(a[b].controller=eval(a[b].controller));I=a}return this};
c.prototype.$=p;c.prototype.TaskQueue=D;c.prototype.ObjectObserver=w;c.prototype.ZxQuery=p.ZxQuery;c.prototype.dumpCache=function(){return I};c.prototype.dumpContexts=function(){return K};q.exports=function(a){const b=new c;"loading"!=document.readyState?b.componentize():document.addEventListener("DOMContentLoaded",function(){b.componentize()});n.monitor(function(a,c){t.isFunction(b.monitor)&&b.monitor(a,Array.prototype.slice.call(c))});return b}},{"../helpers/Logger":2,"../helpers/TaskQueue":3,"../helpers/Util":4,
"../helpers/ZxQuery":5,"../observable/ObjectObserver":7,"./ComponentCache":10,"./ComponentContext":11,"./Componentizer":12,"./ContextController":13,"./OptionAttributes":14}]},{},[6])(6)});
//# sourceMappingURL=zuix.min.js.map
