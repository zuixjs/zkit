/* zUIx v1.0.0 18.08.28 13:45:36 */

/*
 @license
 Copyright 2015-2018 G-Labs. All Rights Reserved.
         https://zuixjs.github.io/zuix

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
'use strict';(function(n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).zuix=n()})(function(){return function(){function n(r,x,a){function g(f,d){if(!x[f]){if(!r[f]){var b="function"==typeof require&&require;if(!d&&b)return b(f,!0);if(h)return h(f,!0);d=Error("Cannot find module '"+f+"'");throw d.code="MODULE_NOT_FOUND",
d;}d=x[f]={exports:{}};r[f][0].call(d.exports,function(b){return g(r[f][1][b]||b)},d,d.exports,n,r,x,a)}return x[f].exports}for(var h="function"==typeof require&&require,d=0;d<a.length;d++)g(a[d]);return g}return n}()({1:[function(n,r,x){function a(e){b=e}function g(){null!==e&&(cancelAnimationFrame(e),e=null);l++;if(l<f.length&&!b.willBreak())return d(),!0;(l>=f.length||b.willBreak())&&h();return!1}function h(e){l=-1;f.length=0;f=[];b.status(null!=e?e:"done")}function d(){const a=f[l];if(null==a)return!1;
const d=function(){null!==e&&(cancelAnimationFrame(e),e=null);b.doWork(a.item,function(){e=requestAnimationFrame(g)})||g()};if(a.cancelable)if(b.willBreak())h("stopped");else if(null==e)e=requestAnimationFrame(d);else return!1;else d();return!0}a.prototype.isReady=function(){return 0===f.length||-1===l};a.prototype.getJobs=function(){return f};a.prototype.setJobs=function(e){0<f.length?(l=-1,f.length=0):(f=e.slice(),b.status("start",f),g())};a.prototype.append=function(b){this.isReady()?this.setJobs(b):
Array.prototype.push.apply(f,b)};let f=[],l=-1,b=null,e=null;r.exports=function(b){return new a(b)}},{}],2:[function(n,r,x){function a(a){h=window?window.console:{};d=window?window:{};this._timers={};this.args=function(b,e,a){b="%c "+e+" %c"+(new Date).toISOString()+" %c"+b;e=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var d=0;d<a.length;d++)if("string"==typeof a[d]&&0===
a[d].indexOf("timer:")){const f=a[d].split(":");if(3===f.length){let c;switch(f[2]){case "start":this._timers[f[1]]=(new Date).getTime();b+=" %cSTART "+f[1];e.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":c=(new Date).getTime()-this._timers[f[1]],b+=" %cSTOP "+f[1]+" "+c+" ms",200<c?e.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<c?e.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):e.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}}b+=
" \n%c ";e.push("background-color:transparent;color:inherit;");for(d=e.length-1;0<=d;d--)Array.prototype.unshift.call(a,e[d]);Array.prototype.unshift.call(a,b);Array.prototype.push.call(a,"\n\n")};this.log=function(b,e){"function"===typeof f&&f.call(a,b,e);d.zuixNoConsoleOutput||(this.args(a,b,e),h.log.apply(h,e))}}const g="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" ");let h=null,d=null,
f=null;a.prototype.monitor=function(a){f=a};a.prototype.console=function(a){if(a)window.console=h;else for(window.console={},a=0;a<g.length;a++)window.console[g[a]]||(window.console[g[a]]=function(){})};a.prototype.i=a.prototype.info=a.prototype.l=a.prototype.log=function(){this.log("INFO",arguments);return this};a.prototype.w=a.prototype.warn=function(){this.log("WARN",arguments);return this};a.prototype.e=a.prototype.error=function(){this.log("ERROR",arguments);return this};a.prototype.d=a.prototype.debug=
function(){this.log("DEBUG",arguments);return this};a.prototype.t=a.prototype.trace=function(){this.log("TRACE",arguments);return this};r.exports=function(d){return new a(d)}},{}],3:[function(n,r,x){function a(a){const d=this;d._worker=null;d._taskList=[];d._requests=[];null==a&&(a=function(){});d.taskQueue=function(f,h,b){d._taskList.push({tid:f,fn:h,status:0,priority:b,step:function(b){g.t(b,"load:step");a(d,"load:step",{task:b})},end:function(){this.status=2;g.t(this.tid,"load:next","timer:task:stop");
a(d,"load:next",{task:this.tid});d._taskList.splice(this.index,1);d.taskCheck();null!=this._callback&&this._callback.call(this)},callback:function(b){this._callback=b}});g.t(f,"task added",b,"priority");d._taskList.sort(function(b,a){return b.priority>a.priority?1:a.priority>b.priority?-1:0});d.taskCheck()};d.taskCheck=function(){for(let f=0;f<d._taskList.length;f++){if(0===d._taskList[f].status){d._taskList[f].status=1;g.t(d._taskList[f].tid,"load:begin","timer:task:start");a(d,"load:begin",{task:d._taskList[f].tid});
d._taskList[f].index=f;d._taskList[f].fn.call(d._taskList[f]);return}if(1===d._taskList[f].status||2===d._taskList[f].status)return}g.t("load:end");a(d,"load:end")}}const g=n("./Logger")("TaskQueue.js");a.prototype.callback=function(a){};a.prototype.queue=function(a,d,f){return this.taskQueue(a,d,f)};r.exports=a},{"./Logger":2}],4:[function(n,r,x){r.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},isNoU:function(a){return"undefined"===typeof a||null===a},isFunction:function(a){return"function"===
typeof a},objectEquals:function(a,g){if(null===a||void 0===a||null===g||void 0===g)return a===g;if(a.constructor!==g.constructor)return!1;if(a instanceof Function||a instanceof RegExp)return a===g;if(a===g||a.valueOf()===g.valueOf())return!0;if(Array.isArray(a)&&a.length!==g.length||a instanceof Date||!(a instanceof Object)||!(g instanceof Object))return!1;const h=Object.keys(a);return Object.keys(g).every(function(a){return-1!==h.indexOf(a)})&&h.every(function(d){return util.objectEquals(a[d],g[d])})},
propertyFromPath:function(a,g){if("string"===typeof g){g=g.replace(/\[(\w+)\]/g,".$1");g=g.replace(/^\./,"");g=g.split(".");for(let h=0;h<g.length;++h){const d=g[h];if("undefined"!==typeof a[d])a=a[d];else return}return a}},cloneObject:function h(g){if(null===g||"object"!==typeof g)return g;let d=g;try{d=g.constructor();for(let f in g)g.hasOwnProperty(f)&&(d[f]=h(g[f]))}catch(f){}return d},hasPassiveEvents:function(){let g=!1;try{const h=Object.defineProperty({},"passive",{get:function(){g=!0}});
window.addEventListener("testPassive",null,h);window.removeEventListener("testPassive",null,h)}catch(h){}return g}}},{}],5:[function(n,r,x){function a(c){d(this,c.type,c)}function g(c,e,d,f){let C=!1;k.each(z,function(){if(this.element===c&&this.path===e&&this.handler===d)return b.w("Handler already registered",c,e,d),C=!0,!1});C||(z.push({element:c,path:e,handler:d,opgions:f}),c.addEventListener(e,a,!B||null!=f&&!1===f.passive?!1:{passive:!0}))}function h(c,b,e){let C=1,d=-1;k.each(z,function(a){this.element===
c&&this.path===b&&this.handler===e&&(C--,d=a)});-1!==d&&z.splice(d,1);0===C&&c.removeEventListener(b,a)}function d(c,b,a){const e=k(c);k.each(z,function(){this.element===c&&this.path===b&&this.handler.call(e,a)})}function f(c){k.each(z,function(){this.element===c&&(b.t("Removing event handler",this.element,this.path,this.handler),h(this.element,this.path,this.handler))})}function l(c){this._selection=[];"undefined"===typeof c&&(c=document.documentElement);if(c instanceof l)return c;if(c instanceof
HTMLCollection||c instanceof NodeList){const b=this._selection=[];k.each(c,function(c,a){b.push(a)})}else if(Array.isArray(c))this._selection=c;else if(c===window||c instanceof HTMLElement||c instanceof Node)this._selection=[c];else if("string"===typeof c)this._selection=document.documentElement.querySelectorAll(c);else if(null!==c)throw b.e("ZxQuery cannot wrap object of this type.",typeof c,c),Error("ZxQuery cannot wrap object of this type.");return this}const b=n("./Logger")("TaskQueue.js"),e=
n("./Util.js");let B=e.hasPassiveEvents();const z=[];l.prototype.length=function(){return this._selection.length};l.prototype.parent=function(c){return e.isNoU(c)?new l(this._selection[0].parentNode):new l(k.getClosest(this._selection[0],c))};l.prototype.children=function(c){return e.isNoU(c)?new l(this._selection[0].children):new l(this._selection[0].querySelectorAll(c))};l.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};l.prototype.get=
function(c){e.isNoU(c)&&(c=0);return this._selection[c]};l.prototype.eq=function(c){const b=this._selection;let a=b[c];1<arguments.length&&(a=[],k.each(arguments,function(c,e){null!=b[e]&&a.push(b[e])}));return new l(a)};l.prototype.find=function(c){return new l(this._selection[0].querySelectorAll(c))};l.prototype.each=function(c){k.each(this._selection,c);return this};l.prototype.attr=function(c,b){const a=this;if("object"===typeof c)k.each(c,function(c,b){a.each(function(a,e){e.setAttribute(c,b)})});
else{if("undefined"==typeof b)return this._selection[0].getAttribute(c);null===b?this._selection[0].removeAttribute(c):this.each(function(a,e){this.get().setAttribute(c,b)})}return this};l.prototype.trigger=function(c,b){let a;window.CustomEvent?a=new CustomEvent(c,{detail:b}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(c,!0,!0,b));this.each(function(c,b){b.dispatchEvent(a)});return this};l.prototype.one=function(c,b){let a=!1;this.on(c,function(e,d){a||(a=!0,k(this).off(c,b),b.call(this,
e,d))});return this};l.prototype.on=function(c,b){const a=c.match(/\S+/g)||[];let e;"function"!==typeof b&&(e=b,b=e.handler);this.each(function(c,d){k.each(a,function(c,a){g(d,a,b,e)})});return this};l.prototype.off=function(c,b){const a=c.match(/\S+/g)||[];this.each(function(c,e){k.each(a,function(c,a){h(e,a,b)})});return this};l.prototype.reset=function(){this.each(function(c,b){f(b)});return this};l.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};
l.prototype.position=function(){return null!=this._selection[0]?k.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};l.prototype.css=function(c,b){const a=this;if("object"===typeof c)k.each(c,function(c,b){a.each(function(a,e){e.style[c]=b})});else{if(e.isNoU(b))return this._selection[0].style[c];a.each(function(a,e){e.style[c]=b})}return this};l.prototype.addClass=function(c){const b=c.match(/\S+/g)||[];k.each(this._selection,function(a,e){e.classList?k.each(b,function(c,b){e.classList.add(b)}):
e.className+=" "+c});return this};l.prototype.hasClass=function(c){return k.hasClass(this._selection[0],c)};l.prototype.removeClass=function(c){const b=c.match(/\S+/g)||[];k.each(this._selection,function(a,e){e.classList?k.each(b,function(c,b){e.classList.remove(b)}):e.className=e.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};l.prototype.prev=function(){return new l(this._selection[0].previousElementSibling)};l.prototype.next=function(){return new l(this._selection[0].nextElementSibling)};
l.prototype.html=function(c){if(e.isNoU(c))return this._selection[0].innerHTML;this.each(function(b,a){a.innerHTML=c});return this};l.prototype.checked=function(c){if(e.isNoU(c)){const c=this._selection[0].checked;return null!=c&&"false"!=c&&(c||"checked"==c)}this.each(function(b,a){a.checked=c});return this};l.prototype.value=function(c){if(e.isNoU(c))return this._selection[0].value;this.each(function(b,a){a.value=c});return this};l.prototype.append=function(c){"string"===typeof c?this._selection[0].innerHTML+=
c:this._selection[0].appendChild(c);return this};l.prototype.insert=function(c,b){c=this.children().get(c);null!==c?this._selection[0].insertBefore(b,c):this._selection[0].appendChild(b);return this};l.prototype.prepend=function(c){"string"===typeof c?this._selection[0].innerHTML=c+this._selection[0].innerHTML:this._selection[0].insertBefore(c,this._selection[0].firstElementChild);return this};l.prototype.detach=function(){const c=this._selection[0],a=c.parentNode;null!=a&&(c.__zuix_oldParent=a,c.__zuix_oldIndex=
Array.prototype.indexOf.call(a.children,c),a.removeChild(c),b.t("Detached from parent",a,c));return this};l.prototype.attach=function(){const c=this._selection[0];null==c.parentNode&&null!=c.__zuix_oldParent&&(k(c.__zuix_oldParent).insert(c.__zuix_oldIndex,c),c.__zuix_oldParent=null,delete c.__zuix_oldParent,delete c.__zuix_oldIndex);return this};l.prototype.display=function(c){if(e.isNoU(c))return this._selection[0].style.display;k.each(this._selection,function(b,a){a.style.display=c});return this};
l.prototype.visibility=function(c){if(e.isNoU(c))return this._selection[0].style.visibility;k.each(this._selection,function(b,a){a.style.visibility=c});return this};l.prototype.show=function(c){return this.display(null==c?"":c)};l.prototype.hide=function(){return this.display("none")};const k=function(c){return new l(c)};k.find=function(c){return k().find(c)};k.each=function(c,b){const a=null==c?0:Object.keys(c).length;if(0<a){let e=0;for(let d in c)if(c.hasOwnProperty(d)){let f=c[d];f instanceof
Element&&(f=k(f));if(!1===b.call(f,d,c[d]))break;e++;if(e>=a)break}}return this};k.ajax=function(c){let b;b=e.isNoU(c)||e.isNoU(c.url)?c:c.url;const a=new XMLHttpRequest;a.open("GET",b);a.onload=function(){200===a.status?e.isFunction(c.success)&&c.success(a.responseText):e.isFunction(c.error)&&c.error(a);e.isFunction(c.then)&&c.then(a)};a.send();return this};k.hasClass=function(c,b){b=b.match(/\S+/g)||[];let a=!1;k.each(b,function(b,e){if(a=c.classList?c.classList.contains(e):(new RegExp("(^| )"+
e+"( |$)","gi")).test(c.className))return!1});return a};k.classExists=function(c){c=c.match(/\S+/g)||[];let b=!1;k.each(c,function(c,a){c=document.styleSheets;if(null!=c)for(let e=0;e<c.length;e++)try{const d=c[e].rules||c[e].cssRules;if(null!=d)for(let c=0;c<d.length;c++)if(d[c].selectorText===a){b=!0;break}}catch(q){if("SecurityError"!==q.name&&"InvalidAccessError"!==q.name)throw q;}});return b};k.wrapElement=function(c,b){c=document.createElement(c);"string"===typeof b?c.innerHTML=b:c.appendChild(b);
return c};k.wrapCss=function(c,a){const e=/(([a-zA-Z0-9\240-\377=:-_\n,.@]+.*){([^{}]|((.*){([^}]+)[}]))*})/g;let d="",f;a=a.replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/g,"");do if((f=e.exec(a))&&1<f.length){var h=f[2];if(null!=h&&0<h.length){h=h.replace(/\n/g,"");const b=h.split(",");let a=!1;k.each(b,function(e,f){"."===f.replace(" ","")?d+="\n"+c+" ":"@"===f.trim()[0]?(d+=f+" ",f.trim().toLowerCase().startsWith("@media")&&(a=!0)):d+="\n"+c+"\n"+f+" ";e<b.length-1&&(d+=", ")});a?(h=k.wrapCss(c,f[1].substring(f[2].length).replace(/^{([^\0]*?)}$/,
"$1")),d+="{\n  "+h+"\n}"):d+=f[1].substring(f[2].length)+"\n"}else b.w("z$.wrapCss was unable to parse rule.",h,f)}while(f);""!==d&&(a=d);return a};k.appendCss=function(c,b,a){const d=document.head||document.getElementsByTagName("head")[0];let f=null;e.isNoU(b)?(b=document.getElementById(a),null!=b&&d.removeChild(b)):d.removeChild(b);"string"===typeof c?(f=document.createElement("style"),f.type="text/css",f.id=a,f.styleSheet?f.styleSheet.cssText=c:f.appendChild(document.createTextNode(c))):c instanceof
Element&&(f=c);e.isNoU(f)||d.appendChild(f);return f};k.replaceCssVars=function(b,a){const c=new RegExp(/\B\$var\[(.*[^\[\]])]/g);let e="",d=0,f=0,h;for(;h=c.exec(b);){let c=h[0];if(1<h.length){var k=h[1];let b=a;if(0<k.indexOf(".")){k=k.split(".");for(let c=0;c<k.length-1&&(b=b[k[c]],"undefined"!==typeof b);c++);"undefined"!==typeof b&&(c=b[k[k.length-1]],d++)}else"undefined"!==typeof b[k]&&(c=b[k],d++)}e+=b.substr(f,h.index-f)+c;f=h.index+h[0].length}0<d&&(b=e+=b.substr(f));return b};k.replaceBraces=
function(b,a){const c=new RegExp(/{?{.*?}?}/g);let d="",f=0,h=0;for(var k;k=c.exec(b);){if("string"===typeof k[0]&&(0===k[0].trim().length||0<=k[0].indexOf("\n"))){k=b.substr(h,k.index-h)+k[0];d+=k;h+=k.length;continue}let c=k[0];if("function"===typeof a){const b=a(k[0]);e.isNoU(b)||(c=b,f++)}d+=b.substr(h,k.index-h)+c;h=k.index+k[0].length}return 0<f?d+=b.substr(h):null};k.getClosest=function(b,a){for(;b&&b!==document;b=b.parentNode)if(b.matches(a))return b;return null};k.getPosition=function(b,
a){var c;{var e=c=0,d=b.getBoundingClientRect();let a=b;for(;a;){if("body"===a.tagName.toLowerCase()){const b=a.scrollTop||document.documentElement.scrollTop;c+=a.offsetLeft-(a.scrollLeft||document.documentElement.scrollLeft)+a.clientLeft;e+=a.offsetTop-b+a.clientTop}else c+=a.offsetLeft-a.scrollLeft+a.clientLeft,e+=a.offsetTop-a.scrollTop+a.clientTop;a=a.offsetParent}c={x:c,y:e,rect:d}}c.visible=!1;d=b.offsetParent;if(null!=d){if(d!==document.body){for(e=d.offsetParent;null!=e&&null!==e.offsetParent&&
e.offsetHeight===e.scrollHeight;)e=e.offsetParent;null!=e&&(d=e)}e=d.getBoundingClientRect();d===document.body&&(e={x:e.x,y:e.y,width:document.documentElement.offsetWidth||document.documentElement.clientWidth,height:document.documentElement.offsetHeight||document.documentElement.clientHeight,top:0,left:0,right:document.documentElement.clientWidth||document.documentElement.offsetWidth,bottom:document.documentElement.clientHeight||document.documentElement.offsetHeight});null==a&&(a=0);d=b.getBoundingClientRect();
a=!(d.left-1>e.right-a||d.right+1<e.left+a||d.top-1>e.bottom-a||d.bottom+1<e.top+a);c.visible=a;c.frame={dx:(d.left+d.width/2-e.left)/e.width,dy:(d.top+d.height/2-e.top)/e.height};b=k(b);!a&&b.hasClass("--ui--visible")?(b.removeClass("--ui--visible"),c.event="exit"):a?a&&(b.hasClass("--ui--visible")?c.event="scroll":(c.event="enter",b.addClass("--ui--visible"))):c.event="off-scroll"}return c};k.ZxQuery=l;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||
Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(b){b=(this.document||this.ownerDocument).querySelectorAll(b);let a=b.length;for(;0<=--a&&b.item(a)!==this;);return-1<a});(function(){function b(b,a){a=a||{bubbles:!1,cancelable:!1,detail:void 0};const c=document.createEvent("CustomEvent");c.initCustomEvent(b,a.bubbles,a.cancelable,a.detail);return c}if("function"===typeof window.CustomEvent)return!1;b.prototype=window.Event.prototype;
window.CustomEvent=b})();String.prototype.hashCode=function(){let b=0;if(0===this.length)return b;for(let a=0;a<this.length;a++){let c=this.charCodeAt(a);b=(b<<5)-b+c;b|=0}return b};String.prototype.startsWith||(String.prototype.startsWith=function(b,a){return this.substr(!a||0>a?0:+a,b.length)===b});r.exports=k},{"./Logger":2,"./Util.js":4}],6:[function(n,r,x){n=n("./zuix/Zuix.js");"object"===typeof r&&r.exports?r.exports=n.call(this):this.zuix=n.call(this)},{"./zuix/Zuix.js":12}],7:[function(n,
r,x){r.exports=function(a){return null}},{}],8:[function(n,r,x){function a(b,a,d){l=b;this._options=null;this.contextId=null==a||null==a.contextId?null:a.contextId;this.componentId=null;this.trigger=function(b,a,c){"function"===typeof d&&d(b,a,c)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}const g=n("../helpers/Logger")("ComponentContext.js"),h=n("./OptionAttributes")(),
d=n("../helpers/ZxQuery"),f=n("../helpers/Util");let l=null;a.prototype.container=function(b){if(null==b)return this._container;b instanceof d.ZxQuery&&(b=b.get());this._container=b;return this};a.prototype.view=function(b){if("undefined"===typeof b)return this._view;b instanceof d.ZxQuery&&(b=b.get());g.t(this.componentId,"view:attach","timer:view:start");if("string"===typeof b){b={content:b};this.trigger(this,"html:parse",b);b=b.content;const a=d.wrapElement("div",b);null!=a.firstElementChild&&
(null!=a.firstElementChild.getAttribute(h.dataUiView)?1===a.children.length&&(b=a.firstElementChild.innerHTML):b=a.innerHTML);null!=this._container?(this._view=this._container,this._view.innerHTML+=b):null!=this._view?this._view.innerHTML=b:this._view=a;d(this._view).find("script").each(function(b,a){"true"!==this.attr("zuix-loaded")&&(this.attr("zuix-loaded","true"),eval.call(window,a.innerHTML))});this.trigger(this,"view:process",d(this._view))}else b instanceof d.ZxQuery&&(b=b.get()),null!=this._container?
(this._view=d.wrapElement("div",b.outerHTML).firstElementChild,this._view.removeAttribute(h.dataUiView),this._container.appendChild(this._view),this._view=this._container):this._view=b;b=d(this._view);!1===this._options.css?b.addClass("zuix-css-ignore"):b.removeClass("zuix-css-ignore");b.find("["+h.dataUiLoad+"]").each(function(b,a){this.attr(h.dataUiLoaded,"false")});this.modelToView();g.t(this.componentId,"view:attach","timer:view:stop");return this};a.prototype.style=function(b){if("undefined"===
typeof b)return this._style;g.t(this.componentId,"view:style","timer:view:start");null==b||b instanceof Element?(this._css=b instanceof Element?b.innerText:b,this._style=d.appendCss(b,this._style,this.componentId)):"string"===typeof b&&(this._css=b,b={content:b},this.trigger(this,"css:parse",b),b=b.content,b=d.wrapCss("["+h.dataUiComponent+'="'+this.componentId+'"]:not(.zuix-css-ignore)',b),this._style=d.appendCss(b,this._style,this.componentId));g.t(this.componentId,"view:style","timer:view:stop");
return this};a.prototype.model=function(b){if("undefined"===typeof b)return this._model;this._model=b;this.modelToView();null!=this._c&&f.isFunction(this._c.update)&&this._c.update.call(this._c);return this};a.prototype.controller=function(b){if("undefined"===typeof b)return this._controller;this._controller=b;return this};a.prototype.options=function(b){if(null==b)return this._options;const a=this._options=this._options||{};d.each(b,function(b,e){a[b]=e});null!=a.componentId&&(this.componentId=a.componentId);
this.container(a.container);this.view(a.view);"undefined"!==typeof a.css&&this.style(a.css);this.controller(a.controller);this.model(a.model);return this};a.prototype.on=function(b,a){this._c.on(b,a);return this};a.prototype.loadCss=function(b,a){const e=this;f.isNoU(b)&&(b={});f.isNoU(b.caching)||(a=b.caching);let h=e.componentId+".css";f.isNoU(b.path)||(h=b.path);a||(h+="?"+(new Date).getTime());d.ajax({url:l.getResourcePath(h),success:function(a){e.style(a);f.isFunction(b.success)&&b.success.call(e,
a)},error:function(a){g.e(a,e);f.isFunction(b.error)&&b.error.call(e,a)},then:function(){f.isFunction(b.then)&&b.then.call(e)}});return this};a.prototype.loadHtml=function(b,a){const e=this;let n=e.componentId;f.isNoU(b)&&(b={});f.isNoU(b.caching)||(a=b.caching);f.isNoU(b.path)||(n=b.path);var k=l.store("zuix.inlineViews");null==k&&(k=[],l.store("zuix.inlineViews",k));if(null!=k[n])e.view(k[n]),f.isFunction(b.success)&&b.success.call(e,k[n]),f.isFunction(b.then)&&b.then.call(e);else{const c=d().find("["+
h.dataUiView+'="'+n+'"]:not(['+h.dataUiComponent+'*=""])');0<c.length()?(a=c.get(0),k[n]=a.innerHTML,e.view()===a||null!=e.container()&&e.container().contains(a)?(c.attr(h.dataUiView,null),e._view=a,this.trigger(this,"view:process",d(e.view()))):e.view(a.innerHTML),f.isFunction(b.success)&&b.success.call(e,a.innerHTML),f.isFunction(b.then)&&b.then.call(e)):(k=f.isNoU(b.cext)?".html":b.cext,n==e.componentId&&(n+=k+(a?"":"?"+(new Date).getTime())),d.ajax({url:l.getResourcePath(n),success:function(a){e.view(a);
f.isFunction(b.success)&&b.success.call(e,a)},error:function(a){g.e(a,e);f.isFunction(b.error)&&b.error.call(e,a)},then:function(){f.isFunction(b.then)&&b.then.call(e)}}))}return this};a.prototype.viewToModel=function(){g.t(this.componentId,"view:model","timer:vm:start");const a=this;this._model={};d(this._view).find("["+h.dataUiField+"]").each(function(b,d){if(0<this.parent("pre,code").length())return!0;b=this.attr(h.dataUiField);d=!f.isNoU(d.innerHTML)&&f.isIE()?d.cloneNode(!0):d;if(0<b.indexOf(".")){b=
b.split(".");let e=a._model;for(let a=0;a<b.length-1;a++)"undefined"===typeof e[b[a]]&&(e[b[a]]={}),e=e[b[a]];e[b[b.length-1]]=d}else a._model[b]=d});g.t(this.componentId,"view:model","timer:vm:stop");return this};a.prototype.modelToView=function(){g.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){const a=this;d(this._view).find("["+h.dataUiField+"]").each(function(b,g){if(0<this.parent("pre,code").length())return!0;var e=this.attr(h.dataBindTo);null==e&&
(e=this.attr(h.dataUiField));if("function"===typeof a._model)a._model.call(d(a._view),this,e);else if(b=f.propertyFromPath(a._model,e),"function"===typeof b)b.call(d(a._view),this,e);else if(null!=b)switch(g.tagName.toLowerCase()){case "img":g.src=f.isNoU(b.src)?f.isNoU(b.innerHTML)?b:b.innerHTML:b.src;b.alt&&(g.alt=b.alt);break;case "a":g.href=f.isNoU(b.href)?f.isNoU(b.innerHTML)?b:b.innerHTML:b.getAttribute("href");b.title&&(g.title=b.title);f.isNoU(b.href)||f.isNoU(b.innerHTML)||""===b.innerHTML.trim()||
(g.innerHTML=b.innerHTML);break;case "input":g.value=f.isNoU(b.value)?f.isNoU(b.innerHTML)?b:b.innerHTML:b.value;break;default:if(g.innerHTML=f.isNoU(b.innerHTML)?b:b.innerHTML,null!=b.attributes)for(e=0;e<b.attributes.length;e++){const a=b.attributes[e];a.specified&&a.name!==h.dataUiField&&("+"===a.value[0]&&g.hasAttribute(a.name)&&(a.value=g.getAttribute(a.name)+" "+a.value.substring(1)),g.setAttribute(a.name,a.value))}}})}g.t(this.componentId,"model:view","timer:mv:stop");return this};r.exports=
a},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./OptionAttributes":11}],9:[function(n,r,x){function a(){}function g(a,b){null!=a&&(I=!a);null!=b&&(K=b);return!D&&!I}function h(a){null==a&&(a=document);F.indexOf(a)||F.push(a)}function d(a){for(let b=0;b<y.length;b++){const c=y[b];if(c.element===a)return c.waiting}return null}function f(a){null==a&&0<F.length&&(a=F.unshift());a instanceof u.ZxQuery&&(a=a.get());d(a);var b=u(a).find("["+t.dataUiLoad+"]:not(["+t.dataUiLoaded+"]),["+
t.dataUiInclude+"]:not(["+t.dataUiLoaded+"])");b=Array.prototype.slice.call(b._selection);y.push({element:a,waiting:b});a=[];for(var c=0;c<b.length;c++){var e=b[c],m=parseInt(e.getAttribute(t.dataUiPriority));isNaN(m)&&(m=0);let d=0;var G=e.parentNode;let f=!1;for(;null!=G&&G!==document;){d++;if(null!=G.getAttribute(t.dataUiView)){f=!0;break}G=G.parentNode}f||(G=new A,G.element=e,G.priority=m+1E3*d,a.push(G))}b=0;for(c=0;c<a.length;c++){e=!1;for(m=0;m<w.length;m++)if(a[c].element===w[m].element){e=
!0;break}e||(e=a[c].element,m=e.getAttribute(t.dataUiOptions),z(e,m),w.push(a[c]),b++)}q.t("componentize:count",w.length,b);(0===b||0===F.length&&0===w.length)&&E.trigger(this,"componentize:end")}function l(){w.sort(function(b,a){return b.priority-a.priority});let a=null,b=0<w.length?w.shift():null;for(;null!=b&&null!=b.element;){const c=O(b.element);g()&&c?(b.lazy=!0,b.visible=u.getPosition(b.element,K).visible):(b.lazy=!1,b.visible=!0);if(null!=b&&null!=b.element&&b.visible){a={item:b,cancelable:b.lazy};
break}if(0<w.length)b=w.shift();else break}return a}function b(b){f(b);b=l();null!=b&&L.append([b])}function e(a){var c=u(a);if(null!=c.attr(t.dataUiLoaded)||0<c.parent("pre,code").length())return!1;c.attr(t.dataUiLoaded,"true");let e=c.attr(t.dataUiOptions);p.isNoU(e)?e={}:(e=p.propertyFromPath(window,e),e=p.cloneObject(e)||{});var d=c.attr(t.dataUiContext);if(!p.isNoU(d)){var m=E.context(d);null!==m&&(e=m.options());e.contextId=d}p.isNoU(e.view)&&!c.isEmpty()?(e.view=a,e.viewDeferred=!0):p.isNoU(e.view)&&
p.isNoU(e.container)&&c.isEmpty()&&(e.container=a);d=c.attr(t.dataUiLoad);if(p.isNoU(d))if(d=c.attr(t.dataUiInclude),null!=d)d=B(d),c.attr(t.dataUiInclude,d),c.attr(t.dataUiComponent,d),p.isNoU(e.controller)&&(e.controller=function(){});else return!1;else d=B(d),c.attr(t.dataUiLoad,d);m=c.attr(t.dataBindModel);!p.isNoU(m)&&0<m.length&&(e.model=p.propertyFromPath(window,m));c=c.attr(t.dataUiPriority);p.isNoU(c)||(e.priority=parseInt(c));u(a).one("component:ready",function(){h(a);b(a)});E.load(d,e);
return!0}function B(b){var a=E.store("config");null!=a&&null!=a[location.host]&&(a=a[location.host]);a=null!=a&&null!=a.libraryPath?a.libraryPath:"https://zuixjs.github.io/zkit/lib/";b.startsWith("@lib/")&&(b=a+b.substring(5));return b}function z(a,b){"string"===typeof b&&(b=p.propertyFromPath(window,b));null!=a&&null!=b&&(null!=b.lazyLoad&&a.setAttribute(t.dataUiLazyload,b.lazyLoad.toString().toLowerCase()),null!=b.contextId&&a.setAttribute(t.dataUiContext,b.contextId.toString().toLowerCase()),null!=
b.componentId&&a.setAttribute(t.dataUiLoad,b.componentId.toString().toLowerCase()))}function k(b){for(let a=0;a<N.length;a++){const c=N[a];if(c.element===b)return c}return null}function c(a){a={element:a};N.push(a);return a}function C(a){for(let b=0;b<v.length;b++){const c=v[b];if(c.element===a)return c}return null}function M(a){a={element:a};v.push(a);return a}function O(a){if("false"===a.getAttribute(t.dataUiLazyload))return!1;let e=k(a);if(null==e){const d=u.getClosest(a.parentNode,"["+t.dataUiLazyload+
"=scroll],["+t.dataUiLazyload+"=true]");if(null!=d)return e=c(a),a=C(d),null==a&&(a=M(d),"scroll"===d.getAttribute(t.dataUiLazyload)&&function(a,m){let c=(new Date).getTime();u(m===document.body?window:m).on("scroll",function(){const a=(new Date).getTime();100<a-c&&(c=a,b(m))})}(this,d)),!0;if("true"===a.getAttribute(t.dataUiLazyload))return e=c(a),!0}else return!0;return!1}const t=n("./OptionAttributes")();a.prototype.componentize=function(a,c){E.trigger(this,"componentize:begin");if(null!=c){const b=
d(a);null==b?y.push({element:a,waiting:[c]}):b.push(c)}else h(a);b(a);return this};a.prototype.applyOptions=function(a,b){z(a,b);return this};a.prototype.resolvePath=function(a){return B(a)};a.prototype.willLoadMore=function(){return 0<w.length||0<F.length};a.prototype.lazyLoad=function(a,b){return g(a,b)};a.prototype.dequeue=function(a){for(let b=0;b<w.length;b++)if(w[b].element===a){w.splice(b,1);break}};a.prototype.setHost=function(a){E=a;return this};r.exports=function(){return new a};const q=
n("../helpers/Logger")("ComponentContext.js"),p=n("../helpers/Util"),u=n("../helpers/ZxQuery"),F=[],w=[],N=[],v=[],A=function(){return{element:null,priority:0,visible:!0,lazy:!1}},L=n("./../helpers/AsynChain")({doWork:function(a,b){u(a.element).one("component:ready",function(){b()});return e(a.element)},willBreak:function(){return!1},status:function(a){switch(a){case "done":b()}}});let I=!1,K=1,E=null,D=!1;navigator&&navigator.userAgent&&(D=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));
D&&q.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");const y=[]},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,"./../helpers/AsynChain":1,"./OptionAttributes":11}],10:[function(n,r,x){function a(a){const d=this;this._view=null;this.context=a;this._fieldCache=[];this.destroy=this.update=this.create=this.init=null;this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(a,e){d._childNodes.push(e)})};this.restoreView=
function(){0<this._childNodes.length&&(d.view().html(""),g.each(d._childNodes,function(a,e){d.view().append(e)}),this._childNodes.length=0)};this.on=function(a,e){this.addEvent(a,e);return this};this.mapEvent=function(a,e,d,f){null!=e&&(e.off(d,this.eventRouter),a[d]=f,e.on(d,this.eventRouter))};this.eventRouter=function(b){"function"===typeof a._behaviorMap[b.type]&&a._behaviorMap[b.type].call(d.view(),b,b.detail);"function"===typeof a._eventMap[b.type]&&a._eventMap[b.type].call(d.view(),b,b.detail)};
const f=a.options();let h=null;if(null!=f.on)for(let a in f.on)f.on.hasOwnProperty(a)&&(h=f.on[a],d.addEvent(a,h));if(null!=f.behavior)for(let a in f.behavior)f.behavior.hasOwnProperty(a)&&(h=f.behavior[a],d.addBehavior(a,h));a.controller().call(this,this);return this}const g=n("../helpers/ZxQuery");a.prototype.addEvent=function(a,d){this.mapEvent(this.context._eventMap,this.view(),a,d);return this};a.prototype.addBehavior=function(a,d){this.mapEvent(this.context._behaviorMap,this.view(),a,d);return this};
a.prototype.field=function(a){return null};a.prototype.clearCache=function(){this._fieldCache.length=0};a.prototype.view=function(a){if(null!=this.context.view()||this._view!==this.context.view())this.clearCache(),this._view=g(this.context.view());if(null!=a)return this._view.find(a);if(null!==this._view)return this._view;throw Error("Not attached to a view yet.");};a.prototype.model=function(a){if(null==a)return this.context.model();this.context.model(a);return this};a.prototype.options=function(){return this.context.options()};
a.prototype.trigger=function(a,d,f){null==this.context._eventMap[a]&&!0!==f&&this.addEvent(a,null);!0===f?(f=this.context.container(),null==f&&(f=this.context.view()),null!=f&&g(f).trigger(a,d),this.context.trigger(this.context,a,d)):this.view().trigger(a,d);return this};a.prototype.expose=function(a,d){if("object"===typeof a){const d=this;g.each(a,function(a,b){d.context[a]=b})}else this.context[a]=d;return this};a.prototype.loadCss=function(a){this.context.loadCss(a);return this};a.prototype.loadHtml=
function(a){this.saveView();this.context.loadHtml(a);return this};a.prototype.log={};a.prototype.for=function(a){return this};r.exports=a},{"../helpers/ZxQuery":5}],11:[function(n,r,x){const a=Object.freeze({dataBindModel:"data-bind-model",dataBindTo:"data-bind-to",dataUiComponent:"data-ui-component",dataUiContext:"data-ui-context",dataUiField:"data-ui-field",dataUiInclude:"data-ui-include",dataUiLazyload:"data-ui-lazyload",dataUiLoad:"data-ui-load",dataUiLoaded:"data-ui-loaded",dataUiOptions:"data-ui-options",
dataUiPriority:"data-ui-priority",dataUiView:"data-ui-view",zuixLoaded:"zuix-loaded"});r.exports=function(g){return a}},{}],12:[function(n,r,x){function a(){v.setHost(this);this._store=[];this._fieldCache=[];return this}function g(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return K[b]=a});return a}function h(a,b,c){p.isNoU(c)&&(c=this);null==c._fieldCache&&(c._fieldCache={});let m=null;if("undefined"===typeof c._fieldCache[a]){if(m=u(b).find("["+A.dataUiField+'="'+a+'"]'),null!=m&&0<m.length()&&
(c._fieldCache[a]=m,1===m.length()&&p.isNoU(m.field))){const a=this;m.field=function(b){return a.field(b,m,m)}}}else m=c._fieldCache[a];return m}function d(a){let b=zuix.store("config");null!=b&&null!=b[location.host]&&(b=b[location.host]);a=v.resolvePath(a);!a.startsWith("//")&&0>a.indexOf("://")&&(a=(null!=b&&null!=b.resourcePath?b.resourcePath:"")+a);return a}function f(a,b){let m=k(a.componentId);null!==m&&null==b.controller&&null==a.controller()&&(a.controller(m.controller),q.t(a.componentId+
":js","component:cached:js"));if(p.isNoU(b.view)){if(null!==m&&(null!=m.view&&(a.view(m.view),q.t(a.componentId+":html","component:cached:html")),!1!==b.css&&(b.css=!1,m.css_applied||(m.css_applied=!0,a.style(m.css),q.t(a.componentId+":css","component:cached:css")))),p.isNoU(a.view()))return P("resource-loader").queue(a.componentId+":html",function(){y[a.componentId]=this;a.loadHtml({cext:b.cext,caching:J,success:function(e){null==m&&(m=C(a));m.view=e;delete m.controller;!1!==b.css?(y[a.componentId].step(a.componentId+
":css"),a.loadCss({caching:J,success:function(a){m.css=a},error:function(b){q.e(b,a)},then:function(){c(a,y[a.componentId])}})):c(a,y[a.componentId])},error:function(c){q.e(c,a);p.isFunction(b.error)&&a.error.call(a,c)}})},b.priority),a}else a.view(b.view);null==a.controller()?P("resource-loader").queue(a.componentId+":js",function(){y[a.componentId]=this;c(a,y[a.componentId])},L.length):c(a);return a}function l(a){if(a instanceof Element){const b=a;a=zuix.context(b);v.dequeue(b)}p.isNoU(a)||(p.isNoU(a._c)||
(p.isNoU(a._c.view())||(a._c.view().attr(A.dataUiComponent,null),a._c.view().reset(),p.isNoU(a._c._fieldCache)||u.each(a._c._fieldCache,function(a,b){b.reset()}),a._c.view().detach()),p.isFunction(a._c.destroy)&&a._c.destroy.call(a)),a=a.container(),null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a))}function b(a){a=new w(zuix,a,B);L.push(a);return a}function e(a,b){let c=null;if(a instanceof u.ZxQuery)a=a.get();else if("string"===typeof a){const b=u.find("["+A.dataUiContext+'="'+a+'"]');0<
b.length()&&(a=b.get())}u.each(L,function(b,m){if(a instanceof Element&&(m.view()===a||m.container()===a)||p.objectEquals(m.contextId,a))return c=m,!1});if("function"===typeof b&&(a instanceof Element||a instanceof u.ZxQuery))if(null==c)u(a).one("component:ready",function(){c=zuix.context(this);b.call(c,c)});else b.call(c,c);return c}function B(a,b,c){p.isFunction(I[b])&&I[b].call(a,c)}function z(a){null!=a&&(J=a);return J}function k(a){let b=null;u.each(H,function(c,e){if(p.objectEquals(e.componentId,
a))return b=e,!1});return b}function c(a,b){if("undefined"===typeof a.options().controller&&null===a.controller())if(q.d(a.componentId,"controller:load"),p.isNoU(b)||b.step(a.componentId+":js"),p.isFunction(K[a.componentId]))a.controller(K[a.componentId]),M(a,b);else{const c=function(b){const c=a.componentId+".js"+(J?"":"?"+(new Date).getTime());u.ajax({url:d(c),success:function(b){try{const c=b.indexOf("function"),e=b.indexOf(".load");1<e&&e<c&&(b=b.substring(0,e-4));const d=b.indexOf(".controller");
1<d&&d<c&&(b=b.substring(d+11));const m=b.indexOf("//<--controller");0<m&&(b=b.substring(0,m));b+='\n//# sourceURL="'+a.componentId+'.js"\n';a.controller(t(b))}catch(R){q.e(Error(),R,b,a),p.isFunction(a.error)&&a.error.call(a,R)}},error:function(b){q.e(b,Error(),a);p.isFunction(a.error)&&a.error.call(a,b)},then:function(){M(a,b)}})};p.isNoU(b)?P("resource-loader").queue(a.componentId+":js",function(){c(y[a.componentId]=this)},a.options().priority):c(b)}else M(a,b)}function C(a){var b=a.view().innerHTML;
b=u.wrapElement("div",b);b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};H.push(b);q.t(a.componentId,"bundle:added");return b}function M(a,b){y[a.componentId]=null;if(p.isNoU(a.view()))q.e(a.componentId,"component:view:undefined");else{let e=k(a.componentId);a.options().viewDeferred?q.w(a.componentId,"component:deferred:load"):null===e?e=C(a):null==e.controller&&(e.controller=a.controller());null!=b&&b.callback(function(){q.d(a.componentId,"controller:create:deferred");
O(a._c)});var c=u(a.view());null==c.attr(A.dataUiContext)&&c.attr(A.dataUiContext,a.contextId);q.d(a.componentId,"component:initializing");if(p.isFunction(a.controller())){c=a._c=new N(a);c.log=n("../helpers/Logger")(a.contextId);"function"===typeof c.init&&c.init();if(!p.isNoU(c.view()))if(null==c.view().attr(A.dataUiComponent)&&c.view().attr(A.dataUiComponent,a.componentId),p.isNoU(a.model())&&!p.isNoU(a.view())&&a.viewToModel(),c.trigger("view:apply"),a.options().viewDeferred){a.options().viewDeferred=
!1;c.saveView();null===e&&(e={componentId:a.componentId,controller:a.controller()},H.push(e),q.t(a.componentId,"bundle:added"),q.d(a.componentId,"component:deferred:load"));let d=-1;!1!==a.options().css&&(null==e.css?(-1===d&&(d=0),d++,a.loadCss({caching:J,success:function(b){null==e.css&&(e.css=b);q.d(a.componentId,"component:deferred:css",d)},then:function(){0===--d&&null!=b&&b.end()}})):a.style(e.css));!1!==a.options().html&&(null==e.view?(-1===d&&(d=0),d++,a.loadHtml({cext:a.options().cext,caching:J,
success:function(b){null==e.view&&(e.view=b);q.d(a.componentId,"component:deferred:html",d)},error:function(b){q.e(b,a);p.isFunction(a.options().error)&&a.options().error.call(a,b)},then:function(){0===--d&&null!=b&&b.end()}})):a.view(e.view));-1===d&&null!=b&&b.end()}else null!=b&&b.end();null==b&&(q.d(a.componentId,"controller:create"),O(c))}else q.w(a.componentId,"component:controller:undefined")}}function O(a){q.t(a.context.componentId,"controller:init","timer:init:start");a.view().find("["+A.dataUiLoaded+
'="false"]:not(['+A.dataUiComponent+"])").each(function(a,b){this.attr(A.dataUiLoaded,null)});a.field=function(b){b=h(b,a.view(),a);b.on=function(b,c,e,d){if("string"===typeof c){const b=c;c=function(){a.trigger(b,e,d)}}return u.ZxQuery.prototype.on.call(this,b,c)};return b};p.isFunction(a.create)&&a.create();a.trigger("view:create");p.isFunction(a.context.ready)&&a.context.ready.call(a.context,a.context);a.trigger("component:ready",a.view(),!0);q.t(a.context.componentId,"controller:init","timer:init:stop");
q.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=D[a.context.componentId]){const b=D[a.context.componentId];D[a.context.componentId]=null;let c;for(;null!=b&&null!=(c=b.shift());)f(c.c,c.o)}zuix.componentize(a.view())}function t(a){let b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(S){q.e(this,S,a)}return b}const q=n("../helpers/Logger")("Zuix.js"),p=n("../helpers/Util"),u=n("../helpers/ZxQuery"),F=n("../helpers/TaskQueue"),w=n("./ComponentContext"),
N=n("./ContextController"),v=n("./Componentizer")(),A=n("./OptionAttributes")();n("./ComponentCache");const L=[],I=[],K={},E=[],D={},y=[],P=function(a){p.isNoU(E[a])&&(E[a]=new F(function(a,b,c){B(a,b,c)}));return E[a]};let H=[],Q=0,J=!0;a.prototype.field=function(a,b){return h.call(this,a,b)};a.prototype.load=function(a,c){{a=v.resolvePath(a);let d;p.isNoU(c)?(c={},d=new w(zuix,c,B)):(c.componentId=a,p.isNoU(c.contextId)?(!1===c&&(c={}),c.contextId="zuix-ctx-"+ ++Q,d=b(c)):(d=e(c.contextId),null!==
d?d.options(c):d=b(c)));d.componentId!=a&&(d.componentId=a);p.isFunction(c.ready)&&(d.ready=c.ready);p.isFunction(c.error)&&(d.error=c.error);null==y[a]?(y[a]=!0,c=f(d,c)):(null==D[a]&&(D[a]=[]),D[a].push({c:d,o:c}),c=d)}return c};a.prototype.unload=function(a){l(a);return this};a.prototype.controller=function(a){return g.call(this,a)};a.prototype.context=function(a,b){return e.call(this,a,b)};a.prototype.createComponent=function(a,c){null==c&&(c={});p.isNoU(c.contextId)&&(c.contextId="zuix-ctx-"+
++Q);if(null!=e(c.contextId))throw Error("Context arelady exists.");c.container=document.createElement("div");c.componentId=a;v.applyOptions(c.container,c);return b(c)};a.prototype.trigger=function(a,b,c){B(a,b,c);return this};a.prototype.hook=function(a,b){p.isNoU(b)?delete I[a]:I[a]=b;return this};a.prototype.using=function(a,b,c){b=v.resolvePath(b);a=a.toLowerCase();const d=a+"-"+b.hashCode();if("component"===a)a=e(d),null==a?zuix.load(b,{contextId:d,view:"",priority:-10,ready:function(a){"function"===
typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{const e="style"===a;if(0===u.find(a+'[id="'+d+'"]').length()){const f=document.head||document.getElementsByTagName("head")[0],g=document.createElement(a);g.type=e?"text/css":"text/javascript";g.id=d;f.appendChild(g);const h=function(a){e?g.styleSheet?g.styleSheet.cssText=a:g.appendChild(document.createTextNode(a)):g.innerText?g.innerText=a:g.appendChild(document.createTextNode(a));c&&c(b,d)},m="_res/"+a+"/"+d;a=k(m);
null!=a?h(e?a.css:a.controller):u.ajax({url:b,success:function(a){H.push({componentId:m,view:null,css:e?a:null,controller:e?null:a,using:b});h(a)},error:function(){f.removeChild(g);c&&c(b)}})}else console.log("Resource already added "+d+"("+b+")"),c&&c(b,d)}};a.prototype.lazyLoad=function(a,b){if(null!=a)v.lazyLoad(a,b);else return v.lazyLoad();return this};a.prototype.httpCaching=function(a){if(null!=a)z(a);else return z();return this};a.prototype.componentize=function(a){v.componentize(a);return this};
a.prototype.store=function(a,b){null!=b&&(this._store[a]=b);return this._store[a]};a.prototype.getResourcePath=function(a){return d(a)};a.prototype.bundle=function(a,b){if(p.isNoU(a))return H;if(a&&"boolean"===typeof a){q.t("bundle:start");const c=v.lazyLoad();v.lazyLoad(!1);v.componentize();"function"===typeof b&&(a=function(a){setTimeout(function(){v.willLoadMore()?(q.t("bundle:wait"),a(a)):(q.t("bundle:end"),v.lazyLoad(c),b())},1E3)},a(a))}else{for(let b=0;b<a.length;b++)a[b].css_applied&&delete a[b].css_applied,
"string"===typeof a[b].controller&&(a[b].controller=eval(a[b].controller));H=a}return this};a.prototype.$=u;a.prototype.TaskQueue=F;a.prototype.ZxQuery=u.ZxQuery;a.prototype.dumpCache=function(){return H};a.prototype.dumpContexts=function(){return L};r.exports=function(b){const c=new a;"loading"!=document.readyState?c.componentize():document.addEventListener("DOMContentLoaded",function(){c.componentize()});q.monitor(function(a,b){p.isFunction(c.monitor)&&c.monitor(a,Array.prototype.slice.call(b))});
return c}},{"../helpers/Logger":2,"../helpers/TaskQueue":3,"../helpers/Util":4,"../helpers/ZxQuery":5,"./ComponentCache":7,"./ComponentContext":8,"./Componentizer":9,"./ContextController":10,"./OptionAttributes":11}]},{},[6])(6)});
//# sourceMappingURL=zuix.min.js.map
